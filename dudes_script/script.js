var theOnChainDudes;(()=>{"use strict";var t={d:(e,i)=>{for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{init:()=>Ce});var i={};t.r(i),t.d(i,{NumArray:()=>K,decomposeMatrix:()=>U,getComputedMatrix:()=>J,lerp:()=>Z,mod:()=>$,setMatrix:()=>W,toFixed:()=>Q});var n={};t.r(n),t.d(n,{Curve:()=>bt,getAnchorsFromArcData:()=>Et,getComponentOnCubicBezier:()=>xt,getControlPoints:()=>kt,getCurveBoundingBox:()=>wt,getCurveFromPoints:()=>At,getCurveLength:()=>vt,getReflection:()=>Rt,integrate:()=>St,subdivide:()=>_t});const s=function(t,e,i){var n,s=256,r=i.pow(s,6),a=i.pow(2,52),o=2*a,h=255;function l(h,l,g){var p=[],m=f(u((l=1==l?{entropy:!0}:l||{}).entropy?[h,y(e)]:null==h?function(){try{var i;return n&&(i=n.randomBytes)?i=i(s):(i=new Uint8Array(s),(t.crypto||t.msCrypto).getRandomValues(i)),y(i)}catch(i){var r=t.navigator,a=r&&r.plugins;return[+new Date,t,a,t.screen,y(e)]}}():h,3),p),b=new c(p),x=function(){for(var t=b.g(6),e=r,i=0;t<a;)t=(t+i)*s,e*=s,i=b.g(1);for(;t>=o;)t/=2,e/=2,i>>>=1;return(t+i)/e};return x.int32=function(){return 0|b.g(4)},x.quick=function(){return b.g(4)/4294967296},x.double=x,f(y(b.S),e),(l.pass||g||function(t,e,n,s){return s&&(s.S&&d(s,b),t.state=function(){return d(b,{})}),n?(i.random=t,e):t})(x,m,"global"in l?l.global:this==i,l.state)}function c(t){var e,i=t.length,n=this,r=0,a=n.i=n.j=0,o=n.S=[];for(i||(t=[i++]);r<s;)o[r]=r++;for(r=0;r<s;r++)o[r]=o[a=h&a+t[r%i]+(e=o[r])],o[a]=e;(n.g=function(t){for(var e,i=0,r=n.i,a=n.j,o=n.S;t--;)e=o[r=h&r+1],i=i*s+o[h&(o[r]=o[a=h&a+e])+(o[a]=e)];return n.i=r,n.j=a,i})(s)}function d(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function u(t,e){var i,n=[],s=typeof t;if(e&&"object"==s)for(i in t)try{n.push(u(t[i],e-1))}catch(t){}return n.length?n:"string"==s?t:t+"\0"}function f(t,e){for(var i,n=t+"",s=0;s<n.length;)e[h&s]=h&(i^=19*e[h&s])+n.charCodeAt(s++);return y(e)}function y(t){return String.fromCharCode.apply(0,t)}if(f(i.random(),e),"object"==typeof module&&module.exports){module.exports=l;try{n=require("crypto")}catch(t){}}else"function"==typeof define&&define.amd?define((function(){return l})):i.seedrandom=l;return{seedrandom:l}}("undefined"!=typeof self?self:void 0,[],Math);class r{constructor(t,e){this.rnd=new s.seedrandom(t),this.scale=1,this.Two=e}randomise(t){return this.rnd()*t-.5*t}getCurveyTopBottomCircle(t){for(var e=[],i=0;i<=t.count;i++){for(var n=0;n<=t.topSegments;n++){var s=0+-180*n/t.topSegments,r=Math.cos(s/180*Math.PI)*t.topRadiusX+this.randomise(t.rand),a=Math.sin(s/180*Math.PI)*t.topRadiusY+this.randomise(t.rand);r+=t.centerX,a=a+t.centerY-.5*t.height,r*=this.scale,a*=this.scale,e.push(new this.Two.Anchor(r,a))}for(n=0;n<=t.bottomSegments;n++)s=-180*n/t.bottomSegments-180,r=Math.cos(s/180*Math.PI)*t.bottomRadiusX+this.randomise(t.rand),a=Math.sin(s/180*Math.PI)*t.bottomRadiusY+this.randomise(t.rand),r+=t.centerX,a=a+t.centerY+.5*t.height,r*=this.scale,a*=this.scale,e.push(new this.Two.Anchor(r,a))}return e}getCurveyCircle(t){for(var e=[],i=0;i<=t.segments;i++){var n=0;t.rotation&&(n=t.rotation);var s=n+t.startAngle+i*(t.endAngle-t.startAngle)/t.segments,r=Math.cos(s/180*Math.PI)*t.radiusX+this.randomise(t.rand),a=Math.sin(s/180*Math.PI)*t.radiusY+this.randomise(t.rand);r+=t.centerX,a+=t.centerY,r*=this.scale,a*=this.scale,e.push(new this.Two.Anchor(r,a))}return e}setStyle0(t){t.fill="0xffffff",t.stroke="0x000000"}setStyle1(t){t.fill="0xffffff",t.stroke="0x000000"}setStyle2(t){t.fill="0xffffff",t.stroke="0x000000"}setStyle2(t){t.fill="0xffffff",t.stroke="0x000000"}}const a=({speed:t,angle:e,shake:i,distance:n,distanceRatio:s,object:r,friction:a,params:o})=>{r.vertices.forEach((t=>{const e=0+i,n=Math.random()*e-.5*e,s=t.ox+n,r=t.oy+n;l(t,s,r,a)}))},o=({speed:t,angle:e,shake:i,distance:n,distanceRatio:s,object:r,drx:a,dry:o,friction:h,params:c})=>{r.vertices.forEach((t=>{const n=0+i,s=Math.random()*n-.5*n;let r=5;c&&c.intensity&&(r=10*c.intensity);let d=Math.abs(a*r),u=Math.abs(o*r),f=t.ox+Math.sin(e)*d+s,y=t.oy+Math.cos(e)*u+s;l(t,f,y,h)}))},h=({speed:t,angle:e,shake:i,distance:n,object:s,drx:r,dry:a,friction:o,params:h})=>{let l=5;h&&h.intensity&&(l=10*h.intensity);let d=Math.abs(r*l),u=Math.abs(a*l),f=s.ox+Math.sin(e)*d,y=s.oy+Math.cos(e)*u;c(s,f,y,o)},l=(t,e,i,n)=>{t.x+=(e-t.x)*n,t.y+=(i-t.y)*n},c=(t,e,i,n)=>{t.translation.x+=(e-t.translation.x)*n,t.translation.y+=(i-t.translation.y)*n};class d{constructor(t,e,i){this.context=t,this.two=t.two,this.pathHelper=t.pathHelper,this.params=e,this.index=i}applyBoldLineStyle(t){t.linewidth=u}applyLightLineStyle(t){t.linewidth=f}applyThinLineStyle(t){t.linewidth=y}applyNoLineStyle(t){t.noStroke()}applyTraitTheme(t,e){t.fill=this.context.theme[e][0],t.stroke=this.context.theme[e][1]}applyTransparentFill(t){t.noFill()}getStyle(){return this.styles[this.index]}addAttribute(t,e){this.attribute={trait_type:t,value:e}}registerAnimation(t,e,i){let n=o;"followObject"==e?n=h:"shakeObject"==e?n=shakeObject:"shakeVertices"==e&&(n=a),this.context.animator.registerObject(t,n,i)}}const u=4,f=2,y=1.5;class g extends d{static getTheme(t,e){return p(t,e)}}const p=function(t,e){const i=m[t].attributeName,n=x(m[t].bg,e),s=x(m[t].face,e),r=x(m[t].ears,e),a=x(m[t].mus,e),o=x(m[t].eyes,e),h=x(m[t].eyeBalls,e),l=x(m[t].nose,e),c=x(m[t].hat,e),d=x(m[t].mouth,e);return{attributeName:i,bg:n[0],face:[s[0],b(s)],ears:[r[0],b(r)],mus:[a[0],b(a)],eyes:[o[0],b(o)],eyeBalls:[h[0],b(h)],nose:[l[0],b(l)],hat:[c[0],b(c)],mouth:[d[0],b(d)]}},m=[{attributeName:"boring",bg:[["#e6ebe0"],["#e8d6cb"],["#eae0d5"],["#f4f9e9"],["#eee2df"],["#f5f7dc"]],face:[["#e5e3ff"],["#d5ccff"],["#fde2e4"],["#eae4e9"]],ears:[["#006d77"],["#343a40"],["#5c4d7d"],["#4a4e69"],["#013a63"]],mus:[["#006d77"],["#343a40"],["#5c4d7d"],["#4a4e69"],["#013a63"]],eyes:[["#c7f9cc"],["#faf0ca"],["#ffd6e0"],["#bdd5ea"],["#e2c6ff"]],eyeBalls:[["#2b2c28"],["#47126b"],["#2a3d45"],["#60463b"],["#313715"]],nose:[["#006d77"],["#343a40"],["#5c4d7d"],["#4a4e69"],["#013a63"]],hat:[["#9b5de5"],["#f15bb5"],["#fee440"],["#00bbf9"],["#00f5d4"]],mouth:[["#f4978e"],["#70d6ff"],["#bee3db"],["#f4d35e"]]},{attributeName:"pastel",bg:[["#70d6ff"],["#ff70a6"],["#ff9770"],["#ffd670"],["#e9ff70"],["#a06cd5"]],face:[["#80ed99"],["#ffa6c1"],["#c19ee0"],["#bac7ff"],["#f7c59f"]],ears:[["#006d77"],["#343a40"],["#5c4d7d"],["#4a4e69"],["#013a63"]],mus:[["#998272"],["#736f72"],["#666a86"],["#386fa4"],["#32746d"]],eyes:[["#c7f9cc"],["#faf0ca"],["#ffd6e0"],["#bdd5ea"],["#e2c6ff"]],eyeBalls:[["#3f334d"],["#283044"],["#30332e"],["#01200f"],["#1d2d44"]],nose:[["#006d77"],["#343a40"],["#5c4d7d"],["#4a4e69"],["#013a63"]],hat:[["#6fffe9"],["#7678ed"],["#abff4f"],["#ffd500"],["#fb6376"]],mouth:[["#f4978e"],["#70d6ff"],["#bee3db"],["#f4d35e"]]},{attributeName:"zombie",bg:[["#44319b"],["#5d7ae9"],["#734b9c"],["#6b4cc2"]],face:[["#a8f9ff"],["#c0fdfb"],["#c6fce5"],["#b8f1eb"]],ears:[["#264653"],["#0f5257"],["#2d3142"],["#053238"]],mus:[["#363636","heavyBrightShade"],["#383330","heavyBrightShade"],["#40352f","heavyBrightShade"]],eyes:[["#ffadad"],["#ffd6a5"],["#caffbf"],["#ffc6ff"],["#9bf6ff"]],eyeBalls:[["#00171f"],["#11151c"],["#011502"],["#11151c"]],nose:[["#264653"],["#0f5257"],["#2d3142"],["#053238"]],hat:[["#fdc5f5","lightDarkShade"],["#2bfce1","lightDarkShade"],["#ffd6a5","lightDarkShade"],["#ffadad","lightDarkShade"],["#fbc4ab","lightDarkShade"],["#ff9cb4","lightDarkShade"],["#ff6978","lightDarkShade"]],mouth:[["#264653"],["#0f5257"],["#2d3142"],["#053238"]]},{attributeName:"classic",bg:[["#ffffff"]],face:[["#ffffff","#000000"]],ears:[["#ffffff","#000000"]],mus:[["#000000","#000000"]],eyes:[["#ffffff","#000000"]],eyeBalls:[["#000000","#000000"]],nose:[["#ffffff","#000000"]],hat:[["#ffffff","#000000"]],mouth:[["#ffffff","#000000"]]},{attributeName:"duds0",bg:[["#331D38"]],face:[["#81F0E5","#1E4E89"]],ears:[["#81F0E5","#1E4E89"]],mus:[["#04C39A","#214F4B"]],eyes:[["#C2F8CB","#214F4B"]],eyeBalls:[["#000000"]],nose:[["#81F0E5","#1E4E89"]],hat:[["#7A27CB","#F432AB"]],mouth:[["#EA7AF4","#331D38"]]},{attributeName:"duds1",bg:[["#243E36"]],face:[["#81F0E5","#545E56"]],ears:[["#04151F","#193A37"]],mus:[["#04151F","#193A37"]],eyes:[["#190A33","#665687"]],eyeBalls:[["#F341B8","#EA7AF4"]],nose:[["#81F0E5","#545E56"]],hat:[["#DCEC32","#09CE6B"]],mouth:[["#EA7AF4","#351F3A"]]},{attributeName:"duds2",bg:[["#000000"]],face:[["#000000","#ffffff"]],ears:[["#000000","#ffffff"]],mus:[["#ffffff","#ffffff"]],eyes:[["#000000","#ffffff"]],eyeBalls:[["#ffffff","#ffffff"]],nose:[["#000000","#ffffff"]],hat:[["#000000","#ffffff"]],mouth:[["#000000","#ffffff"]]},{attributeName:"duds3",bg:[["#242037"]],face:[["#8FCAE6","#2A3C45"]],ears:[["#4B4E69","#16171F"]],mus:[["#4B4E69","#16171F"]],eyes:[["#494C66","#16171F"]],eyeBalls:[["#FE595F","#FE878D"]],nose:[["#4B4E69","#16171F"]],hat:[["#FE5E55","#FF8E7F"]],mouth:[["#F4978E","#492D2A"]]},{attributeName:"duds4",bg:[["#D8F3DC"]],face:[["#BEDFFE","#000000"]],ears:[["#2C6B4F","#000000"]],mus:[["#2C6B4F","#000000"]],eyes:[["#B5E48B","#000000"]],eyeBalls:[["#524F60","#000000"]],nose:[["#CBB7AE","#000000"]],hat:[["#FFD266","#000000"]],mouth:[["#4BC9F0","#000000"]]}],b=function(t){return null==t[1]||"heavyDarkShade"==t[1]?_(t[0],-70):"heavyBrightShade"==t[1]?_(t[0],50):"lightDarkShade"==t[1]?_(t[0],-20):t[1]},x=function(t,e){return t[Math.floor(t.length*e())]},_=function(t,e){let i=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),s=parseInt(t.substring(5,7),16);return i=parseInt(i*(100+e)/100),n=parseInt(n*(100+e)/100),s=parseInt(s*(100+e)/100),i=i<255?i:255,n=n<255?n:255,s=s<255?s:255,"#"+(1==i.toString(16).length?"0"+i.toString(16):i.toString(16))+(1==n.toString(16).length?"0"+n.toString(16):n.toString(16))+(1==s.toString(16).length?"0"+s.toString(16):s.toString(16))};class v extends d{draw(){this.drawLeftEar(this.context.faceStyle.centerX-this.context.faceStyle.topRadiusX),this.drawRightEar(this.context.faceStyle.centerX+this.context.faceStyle.topRadiusX)}drawLeftEar(t){let e=this.getStyle().outer;e.centerX=t,e.centerY=this.context.faceStyle.centerY-.37*this.context.faceStyle.height;let i=this.getStyle().inner;i.centerX=e.centerX,i.centerY=e.centerY;const n=this.pathHelper.getCurveyTopBottomCircle(e),s=new this.context.Two.Path(n,!0,!0),r=this.pathHelper.getCurveyCircle(i),a=new this.context.Two.Path(r,!0,!0);this.applyLightLineStyle(s),this.applyLightLineStyle(a),this.applyTraitTheme(a,"ears"),this.applyTraitTheme(s,"ears"),this.context.backLayer.add(s),this.context.backLayer.add(a),this.registerAnimation(a,"shake",{intensity:2}),this.registerAnimation(s,"shake",{intensity:2})}drawRightEar(t){let e=this.getStyle().outer;e.centerX=t,e.centerY=this.context.faceStyle.centerY-.37*this.context.faceStyle.height;let i=this.getStyle().inner;i.centerX=e.centerX,i.centerY=e.centerY;const n=this.pathHelper.getCurveyTopBottomCircle(e),s=new this.context.Two.Path(n,!0,!0),r=this.pathHelper.getCurveyCircle(i),a=new this.context.Two.Path(r,!0,!0);this.applyLightLineStyle(s),this.applyLightLineStyle(a),this.applyTraitTheme(a,"ears"),this.applyTraitTheme(s,"ears"),this.context.backLayer.add(s),this.context.backLayer.add(a),this.registerAnimation(a,"shake",{intensity:2}),this.registerAnimation(s,"shake",{intensity:2})}styles=[{outer:{count:1,topRadiusX:15,topRadiusY:40,topSegments:6,bottomRadiusX:10,bottomRadiusY:30,bottomSegments:6,height:5,rand:3},inner:{startAngle:0,endAngle:720,radiusX:5,radiusY:12,segments:8,rand:3},rotation:.1},{outer:{},inner:{startAngle:0,endAngle:720,radiusX:10,radiusY:12,segments:8,rand:3},rotation:.1},{outer:{count:1,topRadiusX:45,topRadiusY:35,topSegments:6,bottomRadiusX:30,bottomRadiusY:30,bottomSegments:6,height:25,rand:3},inner:{startAngle:0,endAngle:180,radiusX:20,radiusY:20,segments:25,rand:10},rotation:.1}]}class w extends d{draw(){let t=this.getStyle();t.centerX=0,t.centerY=0,this.context.faceStyle=t;const e=this.pathHelper.getCurveyTopBottomCircle(t),i=new this.context.Two.Path(e,!0,!0);this.applyBoldLineStyle(i),this.applyTraitTheme(i,"face"),this.context.frontLayer.add(i),this.context.frontLayer.center(),this.context.faceBox=i.getBoundingClientRect(),this.addAttribute("Face",t.attributeName),this.registerAnimation(i,"shake",{intensity:5})}styles=[{attributeName:"pickle",count:1,topRadiusX:60,topRadiusY:80,topSegments:6,bottomRadiusX:60,bottomRadiusY:80,bottomSegments:6,height:100,rand:8,rarity:0},{attributeName:"apple",count:1,topRadiusX:80,topRadiusY:90,topSegments:6,bottomRadiusX:100,bottomRadiusY:90,bottomSegments:6,height:60,rand:8,rarity:0},{attributeName:"potato",count:1,topRadiusX:50,topRadiusY:40,topSegments:6,bottomRadiusX:100,bottomRadiusY:90,bottomSegments:6,height:120,rand:8,rarity:0},{attributeName:"wide pickle",count:1,topRadiusX:75,topRadiusY:90,topSegments:6,bottomRadiusX:75,bottomRadiusY:90,bottomSegments:6,height:90,rand:8,rarity:0},{attributeName:"skull",count:1,topRadiusX:90,topRadiusY:90,topSegments:6,bottomRadiusX:60,bottomRadiusY:90,bottomSegments:6,height:60,rand:8},{attributeName:"basketball",count:1,topRadiusX:90,topRadiusY:80,topSegments:3,bottomRadiusX:90,bottomRadiusY:70,bottomSegments:3,height:50,rand:8}]}class S extends d{draw(){const t=this.getStyle();let e=t.lips;e.centerX=this.context.faceStyle.centerX,e.centerY=this.context.faceStyle.centerY+.45*(this.context.faceStyle.height+this.context.faceStyle.bottomRadiusY);let i=t.theets;i.centerX=e.centerX,i.centerY=e.centerY;const n=this.pathHelper.getCurveyCircle(e),s=this.two.makeCurve(n,!0);this.applyLightLineStyle(s),this.applyTraitTheme(s,"mouth");const r=this.pathHelper.getCurveyCircle(i),a=this.two.makeCurve(r,!0);this.applyLightLineStyle(a),this.applyTraitTheme(a,"mouth");const o=this.two.makeGroup(s,a);o.center(),o.translation.set(this.context.faceStyle.centerX,this.context.faceStyle.centerY+2.3*(.5*this.context.faceStyle.height+this.context.faceStyle.bottomRadiusY)/5),this.context.frontLayer.add(o),this.addAttribute("Mouth",t.attributeName),this.registerAnimation(s,"shake",{intensity:8}),this.registerAnimation(a,"shake",{intensity:8})}styles=[{attributeName:"smiling",lips:{startAngle:0,endAngle:360,radiusX:30,radiusY:5,segments:10,rand:5},theets:{startAngle:0,endAngle:180,radiusX:20,radiusY:0,segments:20,rand:5}},{attributeName:"chill",lips:{},theets:{startAngle:0,endAngle:180,radiusX:20,radiusY:0,segments:20,rand:5}},{attributeName:"mad",lips:{startAngle:0,endAngle:720,radiusX:35,radiusY:10,segments:10,rand:5},theets:{startAngle:0,endAngle:180,radiusX:20,radiusY:0,segments:20,rand:5}}]}class A extends d{draw(){this.setStyles(),this.params.isLeft?(this.drawLeftEye(),this.drawLeftEyeBall()):(this.drawRightEye(),this.drawRightEyeBall())}drawLeftEye(){let t,e=Object.assign({},this.eyeStyle);if(e.centerX=this.context.faceStyle.centerX-.5*this.context.faceStyle.topRadiusX,e.centerY=this.context.faceStyle.centerY-.3*this.context.faceStyle.height+this.pathHelper.randomise(20),this.context.leftEyeStyle=e,e.topRadiusX)t=this.pathHelper.getCurveyTopBottomCircle(e);else{if(!e.radiusX)return;t=this.pathHelper.getCurveyCircle(e)}const i=new this.context.Two.Path(t,!0,!0);this.applyBoldLineStyle(i),this.applyTraitTheme(i,"eyes"),this.context.leftEyeBox=i.getBoundingClientRect(),this.context.frontLayer.add(i),this.registerAnimation(i,"shake",{intensity:12})}drawRightEye(){let t,e=Object.assign({},this.eyeStyle);if(e.centerX=this.context.faceStyle.centerX+.5*this.context.faceStyle.topRadiusX,e.centerY=this.context.faceStyle.centerY-.3*this.context.faceStyle.height+this.pathHelper.randomise(0,20),this.context.rightEyeStyle=e,e.topRadiusX)t=this.pathHelper.getCurveyTopBottomCircle(e);else{if(!e.radiusX)return;t=this.pathHelper.getCurveyCircle(e)}const i=new this.context.Two.Path(t,!0,!0);this.applyBoldLineStyle(i),this.applyTraitTheme(i,"eyes"),this.context.rightEyeBox=i.getBoundingClientRect(),this.context.frontLayer.add(i),this.registerAnimation(i,"shake",{intensity:12})}drawLeftEyeBall(){const t=this,e=t.two.makeGroup(),i=function(i){let n;i.centerX=t.context.leftEyeStyle.centerX,i.centerY=t.context.leftEyeStyle.centerY,t.context.leftEyeBallStyle=i,n=i.topRadiusX?t.pathHelper.getCurveyTopBottomCircle(i):t.pathHelper.getCurveyCircle(i);const s=new t.context.Two.Path(n,!0,!0),r=t.two.makeGroup(s);r.center(),r.translation.set(t.context.leftEyeStyle.centerX,t.context.leftEyeStyle.centerY),i.rotation&&(r.rotation=i.rotation+t.pathHelper.randomise(i.randRotation)),t.context.leftEyeBallBox=r.getBoundingClientRect(),t.applyTraitTheme(s,"eyeBalls"),t.applyNoLineStyle(s),t.registerAnimation(s,"shakeVertices",{}),e.add(r)};let n=this.eyeBallStyle;k(n)?i(n):R(n)&&n.forEach((t=>{i(t)})),e.center(),e.translation.set(t.context.leftEyeStyle.centerX,t.context.leftEyeStyle.centerY),t.context.frontLayer.add(e),t.registerAnimation(e,"followObject",{intensity:15,w:t.context.leftEyeBox.width,h:t.context.leftEyeBox.height})}drawRightEyeBall(){const t=this,e=t.two.makeGroup(),i=function(i){let n;i.centerX=t.context.rightEyeStyle.centerX,i.centerY=t.context.rightEyeStyle.centerY,t.context.rightEyeBallStyle=i,n=i.topRadiusX?t.pathHelper.getCurveyTopBottomCircle(i):t.pathHelper.getCurveyCircle(i);const s=new t.context.Two.Path(n,!0,!0),r=t.two.makeGroup(s);r.center(),r.translation.set(t.context.rightEyeStyle.centerX,t.context.rightEyeStyle.centerY),i.rotation&&(r.rotation=i.rotation+t.pathHelper.randomise(i.randRotation)),t.context.rightEyeBallBox=r.getBoundingClientRect(),t.applyTraitTheme(s,"eyeBalls"),t.applyNoLineStyle(s),t.registerAnimation(s,"shakeVertices",{}),e.add(r)};let n=this.eyeBallStyle;k(n)?i(n):R(n)&&n.forEach((t=>{i(t)})),e.center(),e.translation.set(t.context.rightEyeStyle.centerX,t.context.rightEyeStyle.centerY),t.context.frontLayer.add(e),t.registerAnimation(e,"followObject",{intensity:15,w:t.context.leftEyeBox.width,h:t.context.leftEyeBox.height})}setStyles(){0==this.index?(this.eyeStyle=this.styles[0],this.eyeBallStyle=this.eyeBallStyles[0],this.addAttribute("Eyes","big dot")):1==this.index?(this.eyeStyle=this.styles[0],this.eyeBallStyle=this.eyeBallStyles[1],this.addAttribute("Eyes","big ball")):2==this.index?(this.eyeStyle=this.styles[1],this.eyeBallStyle=this.eyeBallStyles[0],this.addAttribute("Eyes","thin dot")):3==this.index?(this.eyeStyle=this.styles[1],this.eyeBallStyle=this.eyeBallStyles[1],this.addAttribute("Eyes","thin ball")):4==this.index?(this.eyeStyle=this.styles[2],this.eyeBallStyle=this.eyeBallStyles[0],this.addAttribute("Eyes","rectangular dot")):5==this.index?(this.eyeStyle=this.styles[2],this.eyeBallStyle=this.eyeBallStyles[1],this.addAttribute("Eyes","rectangular ball")):6==this.index?(this.eyeStyle=this.styles[3],this.eyeBallStyle=this.eyeBallStyles[0],this.addAttribute("Eyes","small dot")):7==this.index?(this.eyeStyle=this.styles[3],this.eyeBallStyle=this.eyeBallStyles[1],this.addAttribute("Eyes","small ball")):8==this.index?(this.eyeStyle=this.styles[4],this.eyeBallStyle=this.eyeBallStyles[0],this.addAttribute("Eyes","robot dot")):9==this.index?(this.eyeStyle=this.styles[4],this.eyeBallStyle=this.eyeBallStyles[1],this.addAttribute("Eyes","robot ball")):"a"===this.index?(this.eyeStyle=this.styles[0],this.eyeBallStyle=this.eyeBallStyles[2],this.addAttribute("Eyes","chameleons")):"b"===this.index&&(this.eyeStyle=this.styles[0],this.eyeBallStyle=this.eyeBallStyles[3],this.addAttribute("Eyes","dead"))}styles=[{startAngle:0,endAngle:720,radiusX:20,radiusY:20,segments:15,rand:5},{startAngle:0,endAngle:720,radiusX:20,radiusY:10,segments:15,rand:5},{startAngle:0,endAngle:720,radiusX:10,radiusY:20,segments:15,rand:3},{startAngle:0,endAngle:720,radiusX:10,radiusY:10,segments:20,rand:2},{count:1,topRadiusX:15,topRadiusY:3,topSegments:2,bottomRadiusX:15,bottomRadiusY:3,bottomSegments:2,height:20,rand:4,boundingHeight:5,rotation:0,randRotation:10}];eyeBallStyles=[{startAngle:0,endAngle:720,radiusX:3,radiusY:3,segments:20,rand:2,boundingHeight:6},{startAngle:0,endAngle:720,radiusX:5,radiusY:5,segments:20,rand:2,boundingHeight:10},{count:1,topRadiusX:10,topRadiusY:1,topSegments:2,bottomRadiusX:10,bottomRadiusY:1,bottomSegments:2,height:2,rand:1,boundingHeight:3,rotation:0,randRotation:10},[{count:1,topRadiusX:10,topRadiusY:1,topSegments:2,bottomRadiusX:10,bottomRadiusY:1,bottomSegments:2,height:2,rand:1,boundingHeight:3,rotation:45,randRotation:0},{count:1,topRadiusX:10,topRadiusY:1,topSegments:2,bottomRadiusX:10,bottomRadiusY:1,bottomSegments:2,height:2,rand:1,boundingHeight:3,rotation:-45,randRotation:0}]]}const k=function(t){return!!t&&t.constructor===Object},R=function(t){return!!t&&t.constructor===Array};class E extends d{draw(){let t=this.getStyle();t.centerX=this.context.faceStyle.centerX,t.centerY=this.context.faceStyle.centerY;const e=this.pathHelper.getCurveyCircle(t),i=new this.context.Two.Path(e,!0,!0),n=this.two.makeGroup(i);n.center(),n.translation.set(this.context.faceStyle.centerX,this.context.faceStyle.centerY),this.context.frontLayer.add(n),this.applyLightLineStyle(i),this.applyTraitTheme(i,"nose"),this.registerAnimation(i,"shake",{intensity:10})}styles=[{attributeName:"medium",attributeName:"",startAngle:0,endAngle:180,radiusX:5,radiusY:10,segments:20,rand:5},{attributeName:"dot",startAngle:90,endAngle:-90,radiusX:2,radiusY:8,segments:20,rand:5},{attributeName:"big",startAngle:0,endAngle:180,radiusX:10,radiusY:10,segments:20,rand:5},{attributeName:"huge",startAngle:0,endAngle:180,radiusX:5,radiusY:25,segments:4,rand:5}]}class B extends d{draw(){this.params.isLeft?this.drawLeftEye():this.drawRightEye()}drawLeftEye(){let t=this.getStyle();t.centerX=0,t.centerY=0;const e=this.pathHelper.getCurveyCircle(t),i=this.two.makeCurve(e,!0),n=this.two.makeGroup(i);if(n.center(),this.context.leftEyeBox){const t=.8*this.context.leftEyeBox.height;n.translation.set(this.context.leftEyeStyle.centerX,this.context.leftEyeStyle.centerY-t)}else{const t=.8*this.context.leftEyeBallBox.height;n.translation.set(this.context.leftEyeStyle.centerX,this.context.leftEyeStyle.centerY-t)}this.applyBoldLineStyle(i),this.applyTraitTheme(i,"face"),this.applyTransparentFill(i),this.context.frontLayer.add(n),this.addAttribute("Eyebrows",t.attributeName),this.registerAnimation(i,"shake",{intensity:8})}drawRightEye(){let t=this.getStyle();t.centerX=0,t.centerY=0;const e=this.pathHelper.getCurveyCircle(t),i=this.two.makeCurve(e,!0),n=this.two.makeGroup(i);if(n.center(),this.context.rightEyeBox){const t=.8*this.context.rightEyeBox.height;n.translation.set(this.context.rightEyeStyle.centerX,this.context.rightEyeStyle.centerY-t)}else{const t=.8*this.context.rightEyeBallBox.height;n.translation.set(this.context.rightEyeStyle.centerX,this.context.rightEyeStyle.centerY-t)}this.applyBoldLineStyle(i),this.applyTraitTheme(i,"face"),this.applyTransparentFill(i),this.context.frontLayer.add(n),this.addAttribute("Eyebrows",t.attributeName),this.registerAnimation(i,"shake",{intensity:8})}styles=[{attributeName:"dot",startAngle:0,endAngle:180,radiusX:5,radiusY:2,segments:3,rand:3},{attributeName:"big",startAngle:0,endAngle:-180,radiusX:8,radiusY:6,segments:3,rand:5},{attributeName:"huge",startAngle:0,endAngle:180,radiusX:15,radiusY:6,segments:3,rand:3}]}class X extends d{draw(){const t=this.getStyle();if(this.addAttribute("Hat",t.attributeName),!t.top||!t.bottom)return;let e=t.top;e.centerX=this.context.faceStyle.centerX,e.centerY=this.context.faceStyle.centerY-.5*this.context.faceStyle.height-.65*this.context.faceStyle.topRadiusY;let i=t.bottom;i.centerX=this.context.faceStyle.centerX+i.radiusX*i.offsetX,i.centerY=e.centerY;const n=this.pathHelper.getCurveyTopBottomCircle(e),s=this.pathHelper.getCurveyCircle(i),r=this.two.makeCurve(n,!0),a=this.two.makeCurve(s,!0),o=this.two.makeGroup(r,a);this.applyBoldLineStyle(r),this.applyBoldLineStyle(a),this.applyTraitTheme(r,"hat"),this.applyTraitTheme(a,"hat"),o.center(),o.translation.set(this.context.faceStyle.centerX+t.offsetX,this.context.faceStyle.centerY-.5*this.context.faceStyle.height-.8*this.context.faceStyle.topRadiusY-.2*this.context.faceStyle.topRadiusX),t.rotation&&(o.rotation=this.pathHelper.randomise(t.rotation)),this.context.frontLayer.add(o),this.context.hatBox=o.getBoundingClientRect(),this.registerAnimation(r,"shake",{intensity:8}),this.registerAnimation(a,"shake",{intensity:11})}styles=[{attributeName:"none"},{attributeName:"vintage",top:{count:1,topRadiusX:60,topRadiusY:80,topSegments:6,bottomRadiusX:50,bottomRadiusY:0,bottomSegments:6,height:0,rand:8},bottom:{offsetX:0,startAngle:0,endAngle:720,radiusX:85,radiusY:10,segments:15,rand:5},rotation:.1,offsetX:0},{attributeName:"boring",top:{count:1,topRadiusX:80,topRadiusY:100,topSegments:6,bottomRadiusX:50,bottomRadiusY:0,bottomSegments:6,height:0,rand:8},bottom:{offsetX:0,startAngle:0,endAngle:720,radiusX:120,radiusY:10,segments:50,rand:5},rotation:.1,offsetX:0},{attributeName:"cap left",top:{count:1,topRadiusX:75,topRadiusY:95,topSegments:6,bottomRadiusX:50,bottomRadiusY:0,bottomSegments:6,height:0,rand:8},bottom:{offsetX:.2,startAngle:0,endAngle:720,radiusX:100,radiusY:5,segments:30,rand:1},rotation:.1,offsetX:25},{attributeName:"cap right",top:{count:1,topRadiusX:75,topRadiusY:95,topSegments:6,bottomRadiusX:50,bottomRadiusY:0,bottomSegments:6,height:0,rand:8},bottom:{offsetX:-.2,startAngle:0,endAngle:720,radiusX:100,radiusY:5,segments:30,rand:1},rotation:.1,offsetX:-25}]}class C extends d{draw(){let t=this.getStyle();t.centerX=0,t.centerY=0;const e=this.pathHelper.getCurveyTopBottomCircle(t),i=this.two.makeCurve(e,!0),n=this.two.makeGroup(i);n.center(),n.translation.set(this.context.faceStyle.centerX,this.context.faceStyle.centerY+1.15*(.5*this.context.faceStyle.height+this.context.faceStyle.bottomRadiusY)/5+t.offsetY),t.rotation&&(n.rotation=this.pathHelper.randomise(t.rotation)),this.context.frontLayer.add(n),this.applyLightLineStyle(i),this.applyTraitTheme(i,"mus"),this.addAttribute("Mustache",t.attributeName),this.registerAnimation(i,"shake",{intensity:10})}styles=[{attributeName:"none"},{attributeName:"gentleman",count:1,topRadiusX:50,topRadiusY:20,topSegments:10,bottomRadiusX:50,bottomRadiusY:-15,bottomSegments:10,height:0,rand:5,rotation:.05,offsetY:10},{attributeName:"ugly",count:1,topRadiusX:30,topRadiusY:15,topSegments:5,bottomRadiusX:10,bottomRadiusY:0,bottomSegments:5,height:0,rand:3,rotation:.05,offsetY:0},{attributeName:"wide",count:1,topRadiusX:80,topRadiusY:40,topSegments:12,bottomRadiusX:80,bottomRadiusY:-40,bottomSegments:12,height:10,rand:4,rotation:.05,offsetY:20},{attributeName:"inspector",count:2,topRadiusX:120,topRadiusY:-20,topSegments:70,bottomRadiusX:100,bottomRadiusY:20,bottomSegments:12,height:0,rand:3,rotation:.05,offsetY:-10}]}class M{constructor(){this.objects=[]}registerAnimation(t){this.animationBlock=t}registerObject(t,e,i){t.ox=t.translation.x,t.oy=t.translation.y,t.vertices&&t.vertices.forEach((t=>{t.ox=t.x,t.oy=t.y})),this.objects.push({object:t,animation:e,params:i})}animate({speed:t,angle:e,shake:i,distance:n,drx:s,dry:r,friction:a}){this.objects.forEach((({object:o,animation:h,params:l})=>{h({object:o,speed:t,angle:e,shake:i,distance:n,drx:s,dry:r,friction:a,params:l})}))}}const T=[[0,0],[1,0],[2,0]],Y=[[0,0],[1,0],[2,0]],O=[[0,0],[1,0],[2,0],[3,0]],j=[[0,0],[1,0],[2,0]];class L{constructor(t,e,i){this.rnd=new s.seedrandom(t),this.context={styleId:t,two:e,Two:i},this.context.theme=g.getTheme(N(t,0),this.rnd),this.context.animator=new M,this.context.pathHelper=new r(t,i),this.context.container=e.makeGroup(),this.context.backLayer=e.makeGroup(),this.context.frontLayer=e.makeGroup(),this.context.attributes=[]}draw(){const t=this.context.styleId,e=new w(this.context,{},N(t,1));e.draw();const i=new A(this.context,{isLeft:!0},N(t,2));i.draw(),new A(this.context,{isLeft:!1},N(t,2)).draw(),new E(this.context,{},P(O,this.context.pathHelper.rnd)).draw(),new B(this.context,{isLeft:!0},P(T,this.context.pathHelper.rnd)).draw(),new B(this.context,{isLeft:!1},P(Y,this.context.pathHelper.rnd)).draw();const n=new X(this.context,{},N(t,3));n.draw();const s=new S(this.context,{},N(t,5));s.draw();const r=new C(this.context,{},N(t,4));r.draw(),new v(this.context,{},P(j,this.context.pathHelper.rnd)).draw(),this.context.container.add(this.context.backLayer),this.context.container.add(this.context.frontLayer),this.context.two.add(this.context.container),this.resize(1.5),this.context.attributes.push({trait_type:"Colors",value:this.context.theme.attributeName}),this.context.attributes.push(e.attribute),this.context.attributes.push(i.attribute),this.context.attributes.push(n.attribute),this.context.attributes.push(s.attribute),this.context.attributes.push(r.attribute)}resize(t){let e=0;this.context.hatBox&&(this.context.faceBox.height,this.context.hatBox.height,this.context.hatBox.bottom,e=.5*Math.abs(this.context.hatBox.top-this.context.faceBox.top)*t),this.context.container.translation.set(this.context.two.width/2,this.context.two.height/2+e),this.context.container.scale=t}animate(t){this.context.animator.animate(t)}}const P=function(t,e){return t[Math.floor(t.length*e())][0]},N=function(t,e){const i=t.split("")[e],n=parseInt(i);return isNaN(n)?i:n},F="M",H="L",I="C",D="A",V="Z";var z;"undefined"!=typeof window?z=window:"undefined"!=typeof global?z=global:"undefined"!=typeof self&&(z=self);const q=z;var G,U=function(t){return{translateX:t.e,translateY:t.f,scaleX:Math.sqrt(t.a*t.a+t.b*t.b),scaleY:Math.sqrt(t.c*t.c+t.d*t.d),rotation:180*Math.atan2(t.b,t.a)/Math.PI}},W=function(t){G=t},J=function(t,e){e=e&&e.identity()||new G;for(var i=t,n=[];i&&i._matrix;)n.push(i._matrix),i=i.parent;n.reverse();for(var s=0;s<n.length;s++){var r=n[s].elements;e.multiply(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9])}return e},Z=function(t,e,i){return i*(e-t)+t},$=function(t,e){for(;t<0;)t+=e;return t%e},K=q.Float32Array||Array,Q=function(t){return Math.floor(1e6*t)/1e6},tt=Array.prototype.slice;const et={isNaN:function(t){return"number"==typeof t&&t!==+t},isElement:function(t){return!(!t||1!==t.nodeType)},isObject:function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},extend:function(t){for(var e=tt.call(arguments,1),i=0;i<e.length;i++){var n=e[i];for(var s in n)t[s]=n[s]}return t},defaults:function(t){for(var e=tt.call(arguments,1),i=0;i<e.length;i++){var n=e[i];for(var s in n)void 0===t[s]&&(t[s]=n[s])}return t},each:function(t,e,i){for(var n=i||this,s=!function(t){if(null==t)return!1;var e=t.length;return"number"==typeof e&&e>=0&&e<4294967296}(t)&&Object.keys(t),r=(s||t).length,a=0;a<r;a++){var o=s?s[a]:a;e.call(n,t[o],o,t)}return t},performance:q.performance&&q.performance.now?q.performance:Date};var it={on:nt,off:st,trigger:function(t){var e=this;if(!e._events)return e;var i=Array.prototype.slice.call(arguments,1),n=e._events[t];return n&&rt(e,n,i),e},listen:function(t,e,i){var n=this;if(t){var s=function(){i.apply(n,arguments)};s.obj=t,s.name=e,s.handler=i,t.on(e,s)}return n},ignore:function(t,e,i){return t.off(e,i),this},Types:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert",order:"order",load:"load"}};function nt(t,e){var i=this;return i._events||(i._events={}),(i._events[t]||(i._events[t]=[])).push(e),i}function st(t,e){var i=this;if(!i._events)return i;if(!t&&!e)return i._events={},i;for(var n=t?[t]:Object.keys(i._events),s=0,r=n.length;s<r;s++){t=n[s];var a=i._events[t];if(a){var o=[];if(e)for(var h=0,l=a.length;h<l;h++){var c=a[h];c=c.handler?c.handler:c,e&&e!==c&&o.push(c)}i._events[t]=o}}return i}function rt(t,e,i){var n;switch(i.length){case 0:n=function(n){e[n].call(t,i[0])};break;case 1:n=function(n){e[n].call(t,i[0],i[1])};break;case 2:n=function(n){e[n].call(t,i[0],i[1],i[2])};break;case 3:n=function(n){e[n].call(t,i[0],i[1],i[2],i[3])};break;default:n=function(n){e[n].apply(t,i)}}for(var s=0;s<e.length;s++)n(s)}it.bind=nt,it.unbind=st;const at=it;function ot(t,e){this.x=t||0,this.y=e||0}et.extend(ot,{zero:new ot,add:function(t,e){return new ot(t.x+e.x,t.y+e.y)},sub:function(t,e){return new ot(t.x-e.x,t.y-e.y)},subtract:function(t,e){return ot.sub(t,e)},ratioBetween:function(t,e){return(t.x*e.x+t.y*e.y)/(t.length()*e.length())},angleBetween:function(t,e){var i,n;return arguments.length>=4?(i=arguments[0]-arguments[2],n=arguments[1]-arguments[3],Math.atan2(n,i)):(i=t.x-e.x,n=t.y-e.y,Math.atan2(n,i))},distanceBetween:function(t,e){return Math.sqrt(ot.distanceBetweenSquared(t,e))},distanceBetweenSquared:function(t,e){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n},MakeObservable:function(t){t.bind=t.on=function(){return this._bound||(this._x=this.x,this._y=this.y,Object.defineProperty(this,"x",lt),Object.defineProperty(this,"y",ct),et.extend(this,ht),this._bound=!0),at.bind.apply(this,arguments),this}}}),et.extend(ot.prototype,at,{constructor:ot,set:function(t,e){return this.x=t,this.y=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this},clear:function(){return this.x=0,this.y=0,this},clone:function(){return new ot(this.x,this.y)},add:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x+=t,this.y+=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x+=t.x,this.y+=t.y):(this.x+=t,this.y+=e)),this},addSelf:function(t){return this.add.apply(this,arguments)},sub:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x-=t,this.y-=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x-=t.x,this.y-=t.y):(this.x-=t,this.y-=e)),this},subtract:function(){return this.sub.apply(this,arguments)},subSelf:function(t){return this.sub.apply(this,arguments)},subtractSelf:function(t){return this.sub.apply(this,arguments)},multiply:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x*=t,this.y*=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=e)),this},multiplySelf:function(t){return this.multiply.apply(this,arguments)},multiplyScalar:function(t){return this.multiply(t)},divide:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x/=t,this.y/=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x/=t.x,this.y/=t.y):(this.x/=t,this.y/=e),et.isNaN(this.x)&&(this.x=0),et.isNaN(this.y)&&(this.y=0)),this},divideSelf:function(t){return this.divide.apply(this,arguments)},divideScalar:function(t){return this.divide(t)},negate:function(){return this.multiply(-1)},dot:function(t){return this.x*t.x+this.y*t.y},length:function(){return Math.sqrt(this.lengthSquared())},lengthSquared:function(){return this.x*this.x+this.y*this.y},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},setLength:function(t){return this.normalize().multiplyScalar(t)},equals:function(t,e){return e=void 0===e?1e-4:e,this.distanceTo(t)<e},lerp:function(t,e){var i=(t.x-this.x)*e+this.x,n=(t.y-this.y)*e+this.y;return this.set(i,n)},isZero:function(t){return t=void 0===t?1e-4:t,this.length()<t},toString:function(){return this.x+", "+this.y},toObject:function(){return{x:this.x,y:this.y}},rotate:function(t){var e=Math.cos(t),i=Math.sin(t);return this.x=this.x*e-this.y*i,this.y=this.x*i+this.y*e,this}});var ht={constructor:ot,set:function(t,e){return this._x=t,this._y=e,this.trigger(at.Types.change)},copy:function(t){return this._x=t.x,this._y=t.y,this.trigger(at.Types.change)},clear:function(){return this._x=0,this._y=0,this.trigger(at.Types.change)},clone:function(){return new ot(this._x,this._y)},add:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x+=t,this._y+=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x+=t.x,this._y+=t.y):(this._x+=t,this._y+=e),this.trigger(at.Types.change))},sub:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x-=t,this._y-=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x-=t.x,this._y-=t.y):(this._x-=t,this._y-=e),this.trigger(at.Types.change))},multiply:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x*=t,this._y*=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x*=t.x,this._y*=t.y):(this._x*=t,this._y*=e),this.trigger(at.Types.change))},divide:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x/=t,this._y/=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x/=t.x,this._y/=t.y):(this._x/=t,this._y/=e),et.isNaN(this._x)&&(this._x=0),et.isNaN(this._y)&&(this._y=0),this.trigger(at.Types.change))},dot:function(t){return this._x*t.x+this._y*t.y},lengthSquared:function(){return this._x*this._x+this._y*this._y},distanceToSquared:function(t){var e=this._x-t.x,i=this._y-t.y;return e*e+i*i},lerp:function(t,e){var i=(t.x-this._x)*e+this._x,n=(t.y-this._y)*e+this._y;return this.set(i,n)},toString:function(){return this._x+", "+this._y},toObject:function(){return{x:this._x,y:this._y}},rotate:function(t){var e=Math.cos(t),i=Math.sin(t);return this._x=this._x*e-this._y*i,this._y=this._x*i+this._y*e,this}},lt={enumerable:!0,get:function(){return this._x},set:function(t){this._x=t,this.trigger(at.Types.change,"x")}},ct={enumerable:!0,get:function(){return this._y},set:function(t){this._y=t,this.trigger(at.Types.change,"y")}};ot.MakeObservable(ot.prototype);const dt=ot;function ut(t,e,i,n,s,r,a){dt.call(this,t,e),this._broadcast=function(){this.trigger(at.Types.change)}.bind(this),this._command=a||F,this._relative=!0;var o="number"==typeof i,h="number"==typeof n,l="number"==typeof s,c="number"==typeof r;(o||h||l||c)&&ut.AppendCurveProperties(this),o&&(this.controls.left.x=i),h&&(this.controls.left.y=n),l&&(this.controls.right.x=s),c&&(this.controls.right.y=r)}et.extend(ut,{AppendCurveProperties:function(t){t.relative=!0,t.controls={},t.controls.left=new dt(0,0),t.controls.right=new dt(0,0)},MakeObservable:function(t){Object.defineProperty(t,"command",{enumerable:!0,get:function(){return this._command},set:function(t){this._command=t,this._command!==I||et.isObject(this.controls)||ut.AppendCurveProperties(this),this.trigger(at.Types.change)}}),Object.defineProperty(t,"relative",{enumerable:!0,get:function(){return this._relative},set:function(t){this._relative!=t&&(this._relative=!!t,this.trigger(at.Types.change))}}),et.extend(t,dt.prototype,ft),t.bind=t.on=function(){var t=this._bound;dt.prototype.bind.apply(this,arguments),t||et.extend(this,ft)}}});var ft={constructor:ut,listen:function(){return et.isObject(this.controls)||ut.AppendCurveProperties(this),this.controls.left.bind(at.Types.change,this._broadcast),this.controls.right.bind(at.Types.change,this._broadcast),this},ignore:function(){return this.controls.left.unbind(at.Types.change,this._broadcast),this.controls.right.unbind(at.Types.change,this._broadcast),this},copy:function(t){return this.x=t.x,this.y=t.y,"string"==typeof t.command&&(this.command=t.command),et.isObject(t.controls)&&(et.isObject(this.controls)||ut.AppendCurveProperties(this),this.controls.left.copy(t.controls.left),this.controls.right.copy(t.controls.right)),"boolean"==typeof t.relative&&(this.relative=t.relative),this.command===D&&(this.rx=t.rx,this.ry=t.ry,this.xAxisRotation=t.xAxisRotation,this.largeArcFlag=t.largeArcFlag,this.sweepFlag=t.sweepFlag),this},clone:function(){var t=this.controls,e=new ut(this.x,this.y,t&&t.left.x,t&&t.left.y,t&&t.right.x,t&&t.right.y,this.command);return e.relative=this._relative,e},toObject:function(){var t={x:this.x,y:this.y};return this._command&&(t.command=this._command),this._relative&&(t.relative=this._relative),this.controls&&(t.controls={left:this.controls.left.toObject(),right:this.controls.right.toObject()}),t},toString:function(){return this.controls?[this._x,this._y,this.controls.left.x,this.controls.left.y,this.controls.right.x,this.controls.right.y,this._command,this._relative?1:0].join(", "):[this._x,this._y].join(", ")}};ut.MakeObservable(ut.prototype);const yt=ut;var gt=0;const pt={nextFrameID:null,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"<%= version %>",PublishDate:"<%= publishDate %>",Identifier:"two-",Resolution:12,AutoCalculateImportedMatrices:!0,Instances:[],uniqueId:function(){return gt++}};var mt=Math.PI/2,bt={CollinearityEpsilon:Math.pow(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:.25,angle:0,epsilon:Number.EPSILON},abscissas:[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],weights:[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]]},xt=function(t,e,i,n,s){var r=1-t;return r*r*r*e+3*r*r*t*i+3*r*t*t*n+t*t*t*s},_t=function(t,e,i,n,s,r,a,o,h){var l=(h=h||bt.RecursionLimit)+1;if(Math.abs(t-a)<.001&&Math.abs(e-o)<.001)return[new yt(a,o)];for(var c=[],d=0;d<l;d++){var u=d/l,f=xt(u,t,i,s,a),y=xt(u,e,n,r,o);c.push(new yt(f,y))}return c},vt=function(t,e,i,n,s,r,a,o,h){if(t===i&&e===n&&s===a&&r===o){var l=a-t,c=o-e;return Math.sqrt(l*l+c*c)}var d=9*(i-s)+3*(a-t),u=6*(t+s)-12*i,f=3*(i-t),y=9*(n-r)+3*(o-e),g=6*(e+r)-12*n,p=3*(n-e);return St((function(t){var e=(d*t+u)*t+f,i=(y*t+g)*t+p;return Math.sqrt(e*e+i*i)}),0,1,h||bt.RecursionLimit)},wt=function(t,e,i,n,s,r,a,o){for(var h,l,c,d,u,f,y,g,p=[],m=[[],[]],b=0;b<2;++b)if(0==b?(l=6*t-12*i+6*s,h=-3*t+9*i-9*s+3*a,c=3*i-3*t):(l=6*e-12*n+6*r,h=-3*e+9*n-9*r+3*o,c=3*n-3*e),Math.abs(h)<1e-12){if(Math.abs(l)<1e-12)continue;0<(d=-c/l)&&d<1&&p.push(d)}else y=l*l-4*c*h,g=Math.sqrt(y),y<0||(0<(u=(-l+g)/(2*h))&&u<1&&p.push(u),0<(f=(-l-g)/(2*h))&&f<1&&p.push(f));for(var x,_=p.length,v=_;_--;)x=1-(d=p[_]),m[0][_]=x*x*x*t+3*x*x*d*i+3*x*d*d*s+d*d*d*a,m[1][_]=x*x*x*e+3*x*x*d*n+3*x*d*d*r+d*d*d*o;return m[0][v]=t,m[1][v]=e,m[0][v+1]=a,m[1][v+1]=o,m[0].length=m[1].length=v+2,{min:{x:Math.min.apply(0,m[0]),y:Math.min.apply(0,m[1])},max:{x:Math.max.apply(0,m[0]),y:Math.max.apply(0,m[1])}}},St=function(t,e,i,n){for(var s=bt.abscissas[n-2],r=bt.weights[n-2],a=.5*(i-e),o=a+e,h=0,l=n+1>>1,c=1&n?r[h++]*t(o):0;h<l;){var d=a*s[h];c+=r[h++]*(t(o+d)+t(o-d))}return a*c},At=function(t,e){for(var i=t.length,n=i-1,s=0;s<i;s++){var r=t[s];et.isObject(r.controls)||yt.AppendCurveProperties(r);var a=e?$(s-1,i):Math.max(s-1,0),o=e?$(s+1,i):Math.min(s+1,n),h=t[a],l=r,c=t[o];kt(h,l,c),l.command=0===s?F:I}},kt=function(t,e,i){var n=dt.angleBetween(t,e),s=dt.angleBetween(i,e),r=dt.distanceBetween(t,e),a=dt.distanceBetween(i,e),o=(n+s)/2;return r<1e-4||a<1e-4?("boolean"!=typeof e.relative||e.relative||(e.controls.left.copy(e),e.controls.right.copy(e)),e):(r*=.33,a*=.33,s<n?o+=mt:o-=mt,e.controls.left.x=Math.cos(o)*r,e.controls.left.y=Math.sin(o)*r,o-=Math.PI,e.controls.right.x=Math.cos(o)*a,e.controls.right.y=Math.sin(o)*a,"boolean"!=typeof e.relative||e.relative||(e.controls.left.x+=e.x,e.controls.left.y+=e.y,e.controls.right.x+=e.x,e.controls.right.y+=e.y),e)},Rt=function(t,e,i){return new dt(2*t.x-(e.x+t.x)-(i?t.x:0),2*t.y-(e.y+t.y)-(i?t.y:0))},Et=function(t,e,i,n,s,r,a){for(var o=pt.Resolution,h=[],l=0;l<o;l++){var c=(l+1)/o;a&&(c=1-c);var d=c*r+s,u=i*Math.cos(d),f=n*Math.sin(d),y=new yt(u,f);yt.AppendCurveProperties(y),y.command=H,h.push(y)}},Bt=q.devicePixelRatio||1;const Xt=function(t){return Bt/function(t){return t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1}(t)};var Ct=Math.cos,Mt=Math.sin,Tt=Math.tan,Yt=[];function Ot(t,e,i,n,s,r){this.elements=new K(9);var a=t;Array.isArray(a)||(a=Array.prototype.slice.call(arguments)),this.identity(),a.length>0&&this.set(a)}W(Ot),et.extend(Ot,{Identity:[1,0,0,0,1,0,0,0,1],Multiply:function(t,e,i){if(e.length<=3){var n=t,s=e[0]||0,r=e[1]||0,a=e[2]||0;return{x:n[0]*s+n[1]*r+n[2]*a,y:n[3]*s+n[4]*r+n[5]*a,z:n[6]*s+n[7]*r+n[8]*a}}var o=t[0],h=t[1],l=t[2],c=t[3],d=t[4],u=t[5],f=t[6],y=t[7],g=t[8],p=e[0],m=e[1],b=e[2],x=e[3],_=e[4],v=e[5],w=e[6],S=e[7],A=e[8];return(i=i||new K(9))[0]=o*p+h*x+l*w,i[1]=o*m+h*_+l*S,i[2]=o*b+h*v+l*A,i[3]=c*p+d*x+u*w,i[4]=c*m+d*_+u*S,i[5]=c*b+d*v+u*A,i[6]=f*p+y*x+g*w,i[7]=f*m+y*_+g*S,i[8]=f*b+y*v+g*A,i}}),et.extend(Ot.prototype,at,{constructor:Ot,manual:!1,set:function(t,e,i,n,s,r,a,o,h){var l;return void 0===e&&(t=(l=t)[0],e=l[1],i=l[2],n=l[3],s=l[4],r=l[5],a=l[6],o=l[7],h=l[8]),this.elements[0]=t,this.elements[1]=e,this.elements[2]=i,this.elements[3]=n,this.elements[4]=s,this.elements[5]=r,this.elements[6]=a,this.elements[7]=o,this.elements[8]=h,this.trigger(at.Types.change)},copy:function(t){return this.elements[0]=t.elements[0],this.elements[1]=t.elements[1],this.elements[2]=t.elements[2],this.elements[3]=t.elements[3],this.elements[4]=t.elements[4],this.elements[5]=t.elements[5],this.elements[6]=t.elements[6],this.elements[7]=t.elements[7],this.elements[8]=t.elements[8],this.manual=t.manual,this.trigger(at.Types.change)},identity:function(){return this.elements[0]=Ot.Identity[0],this.elements[1]=Ot.Identity[1],this.elements[2]=Ot.Identity[2],this.elements[3]=Ot.Identity[3],this.elements[4]=Ot.Identity[4],this.elements[5]=Ot.Identity[5],this.elements[6]=Ot.Identity[6],this.elements[7]=Ot.Identity[7],this.elements[8]=Ot.Identity[8],this.trigger(at.Types.change)},multiply:function(t,e,i,n,s,r,a,o,h){if(void 0===e)return this.elements[0]*=t,this.elements[1]*=t,this.elements[2]*=t,this.elements[3]*=t,this.elements[4]*=t,this.elements[5]*=t,this.elements[6]*=t,this.elements[7]*=t,this.elements[8]*=t,this.trigger(at.Types.change);if(void 0===n)return t=t||0,e=e||0,i=i||0,{x:(s=this.elements)[0]*t+s[1]*e+s[2]*i,y:s[3]*t+s[4]*e+s[5]*i,z:s[6]*t+s[7]*e+s[8]*i};var l=this.elements,c=[t,e,i,n,s,r,a,o,h],d=l[0],u=l[1],f=l[2],y=l[3],g=l[4],p=l[5],m=l[6],b=l[7],x=l[8],_=c[0],v=c[1],w=c[2],S=c[3],A=c[4],k=c[5],R=c[6],E=c[7],B=c[8];return this.elements[0]=d*_+u*S+f*R,this.elements[1]=d*v+u*A+f*E,this.elements[2]=d*w+u*k+f*B,this.elements[3]=y*_+g*S+p*R,this.elements[4]=y*v+g*A+p*E,this.elements[5]=y*w+g*k+p*B,this.elements[6]=m*_+b*S+x*R,this.elements[7]=m*v+b*A+x*E,this.elements[8]=m*w+b*k+x*B,this.trigger(at.Types.change)},inverse:function(t){var e=this.elements;t=t||new Ot;var i=e[0],n=e[1],s=e[2],r=e[3],a=e[4],o=e[5],h=e[6],l=e[7],c=e[8],d=c*a-o*l,u=-c*r+o*h,f=l*r-a*h,y=i*d+n*u+s*f;return y?(y=1/y,t.elements[0]=d*y,t.elements[1]=(-c*n+s*l)*y,t.elements[2]=(o*n-s*a)*y,t.elements[3]=u*y,t.elements[4]=(c*i-s*h)*y,t.elements[5]=(-o*i+s*r)*y,t.elements[6]=f*y,t.elements[7]=(-l*i+n*h)*y,t.elements[8]=(a*i-n*r)*y,t):null},scale:function(t,e){var i=arguments.length;return i<=1&&(e=t),this.multiply(t,0,0,0,e,0,0,0,1)},rotate:function(t){var e=Ct(t),i=Mt(t);return this.multiply(e,-i,0,i,e,0,0,0,1)},translate:function(t,e){return this.multiply(1,0,t,0,1,e,0,0,1)},skewX:function(t){var e=Tt(t);return this.multiply(1,e,0,0,1,0,0,0,1)},skewY:function(t){var e=Tt(t);return this.multiply(1,0,0,e,1,0,0,0,1)},toString:function(t){return Yt.length=0,this.toTransformArray(t,Yt),Yt.map(Q).join(" ")},toTransformArray:function(t,e){var i=this.elements,n=!!e,s=i[0],r=i[1],a=i[2],o=i[3],h=i[4],l=i[5];if(t){var c=i[6],d=i[7],u=i[8];return n?(e[0]=s,e[1]=o,e[2]=c,e[3]=r,e[4]=h,e[5]=d,e[6]=a,e[7]=l,void(e[8]=u)):[s,o,c,r,h,d,a,l,u]}return n?(e[0]=s,e[1]=o,e[2]=r,e[3]=h,e[4]=a,void(e[5]=l)):[s,o,r,h,a,l]},toArray:function(t,e){var i=this.elements,n=!!e,s=i[0],r=i[1],a=i[2],o=i[3],h=i[4],l=i[5];if(t){var c=i[6],d=i[7],u=i[8];return n?(e[0]=s,e[1]=r,e[2]=a,e[3]=o,e[4]=h,e[5]=l,e[6]=c,e[7]=d,void(e[8]=u)):[s,r,a,o,h,l,c,d,u]}return n?(e[0]=s,e[1]=r,e[2]=a,e[3]=o,e[4]=h,void(e[5]=l)):[s,r,a,o,h,l]},toObject:function(){return{elements:this.toArray(!0),manual:!!this.manual}},clone:function(){return(new Ot).copy(this)}});const jt=Ot;function Lt(){this.renderer={},this._renderer.flagMatrix=Lt.FlagMatrix.bind(this),this.isShape=!0,this.id=pt.Identifier+pt.uniqueId(),this.classList=[],this.matrix=new jt,this.translation=new dt,this.rotation=0,this.scale=1,this.skewX=0,this.skewY=0}et.extend(Lt,{FlagMatrix:function(){this._flagMatrix=!0},MakeObservable:function(t){var e={enumerable:!1,get:function(){return this._translation},set:function(t){this._translation&&this._translation.unbind(at.Types.change,this._renderer.flagMatrix),this._translation=t,this._translation.bind(at.Types.change,this._renderer.flagMatrix),Lt.FlagMatrix.call(this)}};Object.defineProperty(t,"translation",e),Object.defineProperty(t,"position",e),Object.defineProperty(t,"rotation",{enumerable:!0,get:function(){return this._rotation},set:function(t){this._rotation=t,this._flagMatrix=!0}}),Object.defineProperty(t,"scale",{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof dt&&this._scale.unbind(at.Types.change,this._renderer.flagMatrix),this._scale=t,this._scale instanceof dt&&this._scale.bind(at.Types.change,this._renderer.flagMatrix),this._flagMatrix=!0,this._flagScale=!0}}),Object.defineProperty(t,"skewX",{enumerable:!0,get:function(){return this._skewX},set:function(t){this._skewX=t,this._flagMatrix=!0}}),Object.defineProperty(t,"skewY",{enumerable:!0,get:function(){return this._skewY},set:function(t){this._skewY=t,this._flagMatrix=!0}}),Object.defineProperty(t,"matrix",{enumerable:!0,get:function(){return this._matrix},set:function(t){this._matrix=t,this._flagMatrix=!0}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return this._id},set:function(t){var e=this._id;t!==this._id&&(this._id=t,this._flagId=!0,this.parent&&(delete this.parent.children.ids[e],this.parent.children.ids[this._id]=this))}}),Object.defineProperty(t,"className",{enumerable:!0,get:function(){return this._className},set:function(t){if(this._flagClassName=this._className!==t,this._flagClassName){for(var e=this._className.split(/\s+?/),i=t.split(/\s+?/),n=0;n<e.length;n++){var s=e[n],r=Array.prototype.indexOf.call(this.classList,s);r>=0&&this.classList.splice(r,1)}this.classList=this.classList.concat(i)}this._className=t}}),Object.defineProperty(t,"renderer",{enumerable:!1,get:function(){return this._renderer},set:function(t){this._renderer=t}})}}),et.extend(Lt.prototype,at,{constructor:Lt,_flagId:!0,_flagMatrix:!0,_flagScale:!1,_flagClassName:!1,_id:"",_translation:null,_rotation:0,_scale:1,_skewX:0,_skewY:0,_className:"",addTo:function(t){return t.add(this),this},clone:function(t){var e=new Lt;return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},_update:function(t){return!this._matrix.manual&&this._flagMatrix&&(this._matrix.identity().translate(this.translation.x,this.translation.y),this._scale instanceof dt?this._matrix.scale(this._scale.x,this._scale.y):this._matrix.scale(this._scale),this._matrix.rotate(this.rotation),this._matrix.skewX(this.skewX),this._matrix.skewY(this.skewY)),t&&this.parent&&this.parent._update&&this.parent._update(),this},flagReset:function(){return this._flagId=this._flagMatrix=this._flagScale=this._flagClassName=!1,this}}),Lt.MakeObservable(Lt.prototype);const Pt=Lt;function Nt(){Array.call(this),arguments[0]&&Array.isArray(arguments[0])?arguments[0].length>0&&Array.prototype.push.apply(this,arguments[0]):arguments.length>0&&Array.prototype.push.apply(this,arguments)}Nt.prototype=new Array,et.extend(Nt.prototype,at,{constructor:Nt,pop:function(){var t=Array.prototype.pop.apply(this,arguments);return this.trigger(at.Types.remove,[t]),t},shift:function(){var t=Array.prototype.shift.apply(this,arguments);return this.trigger(at.Types.remove,[t]),t},push:function(){var t=Array.prototype.push.apply(this,arguments);return this.trigger(at.Types.insert,arguments),t},unshift:function(){var t=Array.prototype.unshift.apply(this,arguments);return this.trigger(at.Types.insert,arguments),t},splice:function(){var t,e=Array.prototype.splice.apply(this,arguments);return this.trigger(at.Types.remove,e),arguments.length>2&&(t=this.slice(arguments[0],arguments[0]+arguments.length-2),this.trigger(at.Types.insert,t),this.trigger(at.Types.order)),e},sort:function(){return Array.prototype.sort.apply(this,arguments),this.trigger(at.Types.order),this},reverse:function(){return Array.prototype.reverse.apply(this,arguments),this.trigger(at.Types.order),this},indexOf:function(){return Array.prototype.indexOf.apply(this,arguments)}});const Ft=Nt;function Ht(t){Ft.apply(this,arguments),Object.defineProperty(this,"_events",{value:{},enumerable:!1}),this.ids={},this.attach(Array.isArray(t)?t:Array.prototype.slice.call(arguments)),this.on(at.Types.insert,this.attach),this.on(at.Types.remove,this.detach)}Ht.prototype=new Ft,et.extend(Ht.prototype,{constructor:Ht,attach:function(t){for(var e=0;e<t.length;e++){var i=t[e];i&&i.id&&(this.ids[i.id]=i)}return this},detach:function(t){for(var e=0;e<t.length;e++)delete this.ids[t[e].id];return this}});const It=Ht;var Dt=Math.min,Vt=Math.max;function zt(t){Pt.call(this,!0),this._renderer.type="group",this.additions=[],this.subtractions=[],this.children=Array.isArray(t)?t:Array.prototype.slice.call(arguments)}function qt(t,e){var i,n=t.parent;function s(){e.subtractions.length>0&&(i=Array.prototype.indexOf.call(e.subtractions,t))>=0&&e.subtractions.splice(i,1),e.additions.length>0&&(i=Array.prototype.indexOf.call(e.additions,t))>=0&&e.additions.splice(i,1),t.parent=e,e.additions.push(t),e._flagAdditions=!0}function r(){(i=Array.prototype.indexOf.call(n.additions,t))>=0&&n.additions.splice(i,1),(i=Array.prototype.indexOf.call(n.subtractions,t))<0&&(n.subtractions.push(t),n._flagSubtractions=!0)}n!==e?(n&&n.children.ids[t.id]&&(i=Array.prototype.indexOf.call(n.children,t),n.children.splice(i,1),r()),e?s():(r(),n._flagAdditions&&0===n.additions.length&&(n._flagAdditions=!1),n._flagSubtractions&&0===n.subtractions.length&&(n._flagSubtractions=!1),delete t.parent)):s()}et.extend(zt,{Children:It,InsertChildren:function(t){for(var e=0;e<t.length;e++)qt.call(this,t[e],this)},RemoveChildren:function(t){for(var e=0;e<t.length;e++)qt.call(this,t[e])},OrderChildren:function(t){this._flagOrder=!0},Properties:["fill","stroke","linewidth","cap","join","miter","closed","curved","automatic"],MakeObservable:function(t){var e=zt.Properties;Object.defineProperty(t,"visible",{enumerable:!0,get:function(){return this._visible},set:function(t){this._flagVisible=this._visible!==t||this._flagVisible,this._visible=t}}),Object.defineProperty(t,"opacity",{enumerable:!0,get:function(){return this._opacity},set:function(t){this._flagOpacity=this._opacity!==t||this._flagOpacity,this._opacity=t}}),Object.defineProperty(t,"beginning",{enumerable:!0,get:function(){return this._beginning},set:function(t){this._flagBeginning=this._beginning!==t||this._flagBeginning,this._beginning=t}}),Object.defineProperty(t,"ending",{enumerable:!0,get:function(){return this._ending},set:function(t){this._flagEnding=this._ending!==t||this._flagEnding,this._ending=t}}),Object.defineProperty(t,"length",{enumerable:!0,get:function(){if(this._flagLength||this._length<=0){if(this._length=0,!this.children)return this._length;for(var t=0;t<this.children.length;t++){var e=this.children[t];this._length+=e.length}}return this._length}}),Pt.MakeObservable(t),zt.MakeGetterSetters(t,e),Object.defineProperty(t,"children",{enumerable:!0,get:function(){return this._children},set:function(t){var e=zt.InsertChildren.bind(this),i=zt.RemoveChildren.bind(this),n=zt.OrderChildren.bind(this);this._children&&(this._children.unbind(),this._children.length>0&&i(this._children)),this._children=new It(t),this._children.bind(at.Types.insert,e),this._children.bind(at.Types.remove,i),this._children.bind(at.Types.order,n),t.length>0&&e(t)}}),Object.defineProperty(t,"mask",{enumerable:!0,get:function(){return this._mask},set:function(t){this._mask=t,this._flagMask=!0,t.clip||(t.clip=!0)}})},MakeGetterSetters:function(t,e){Array.isArray(e)||(e=[e]),et.each(e,(function(e){zt.MakeGetterSetter(t,e)}))},MakeGetterSetter:function(t,e){var i="_"+e;Object.defineProperty(t,e,{enumerable:!0,get:function(){return this[i]},set:function(t){this[i]=t;for(var n=0;n<this.children.length;n++)this.children[n][e]=t}})}}),et.extend(zt.prototype,Pt.prototype,{constructor:zt,_flagAdditions:!1,_flagSubtractions:!1,_flagOrder:!1,_flagOpacity:!0,_flagBeginning:!1,_flagEnding:!1,_flagLength:!1,_flagMask:!1,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_length:0,_mask:null,clone:function(t){var e=new zt,i=this.children.map((function(t){return t.clone()}));return e.add(i),e.opacity=this.opacity,this.mask&&(e.mask=this.mask),e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.className=this.className,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},toObject:function(){var t={children:[],translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale instanceof dt?this.scale.toObject():this.scale,opacity:this.opacity,className:this.className,mask:this.mask?this.mask.toObject():null};return this.matrix.manual&&(t.matrix=this.matrix.toObject()),et.each(this.children,(function(e,i){t.children[i]=e.toObject()}),this),t},corner:function(){for(var t=this.getBoundingClientRect(!0),e=0;e<this.children.length;e++){var i=this.children[e];i.translation.x-=t.left,i.translation.y-=t.top}return this},center:function(){for(var t=this.getBoundingClientRect(!0),e=t.left+t.width/2-this.translation.x,i=t.top+t.height/2-this.translation.y,n=0;n<this.children.length;n++){var s=this.children[n];s.isShape&&(s.translation.x-=e,s.translation.y-=i)}return this},getById:function(t){var e=null;return function i(n){if(n.id===t)return n;if(n.children)for(var s=0;s<n.children.length;s++)if(e=i(n.children[s]))return e;return null}(this)},getByClassName:function(t){var e=[];return function i(n){if(Array.prototype.indexOf.call(n.classList,t)>=0&&e.push(n),n.children)for(var s=0;s<n.children.length;s++)i(n.children[s]);return e}(this)},getByType:function(t){var e=[];return function i(n){if(n instanceof t&&e.push(n),n.children)for(var s=0;s<n.children.length;s++)i(n.children[s]);return e}(this)},add:function(t){t=t instanceof Array?t.slice():Array.prototype.slice.call(arguments);for(var e=0;e<t.length;e++){var i=t[e];if(i&&i.id){var n=Array.prototype.indexOf.call(this.children,i);n>=0&&this.children.splice(n,1),this.children.push(i)}}return this},remove:function(t){var e=arguments.length,i=this.parent;if(e<=0&&i)return i.remove(this),this;t=t instanceof Array?t.slice():Array.prototype.slice.call(arguments);for(var n=0;n<t.length;n++){var s=t[n];if(s&&this.children.ids[s.id]){var r=this.children.indexOf(s);r>=0&&this.children.splice(r,1)}}return this},getBoundingClientRect:function(t){var e,i,n,s,r,a,o,h,l,c;this._update(!0);var d=1/0,u=-1/0,f=1/0,y=-1/0,g=/texture|gradient/i;i=t?this._matrix:J(this);for(var p=0;p<this.children.length;p++){var m=this.children[p];m.visible&&!g.test(m._renderer.type)&&(o="number"!=typeof(e=m.getBoundingClientRect(t)).top||et.isNaN(e.top)||!isFinite(e.top),h="number"!=typeof e.left||et.isNaN(e.left)||!isFinite(e.left),l="number"!=typeof e.right||et.isNaN(e.right)||!isFinite(e.right),c="number"!=typeof e.bottom||et.isNaN(e.bottom)||!isFinite(e.bottom),o||h||l||c||(f=Dt(e.top,f),d=Dt(e.left,d),u=Vt(e.right,u),y=Vt(e.bottom,y)))}return t&&(n=i.multiply(d,f,1),s=i.multiply(d,y,1),r=i.multiply(u,f,1),a=i.multiply(u,y,1),f=Dt(n.y,s.y,r.y,a.y),d=Dt(n.x,s.x,r.x,a.x),u=Vt(n.x,s.x,r.x,a.x),y=Vt(n.y,s.y,r.y,a.y)),{top:f,left:d,right:u,bottom:y,width:u-d,height:y-f}},noFill:function(){return this.children.forEach((function(t){t.noFill()})),this},noStroke:function(){return this.children.forEach((function(t){t.noStroke()})),this},subdivide:function(){var t=arguments;return this.children.forEach((function(e){e.subdivide.apply(e,t)})),this},_update:function(){var t,e,i;if(this._flagBeginning||this._flagEnding){var n=Math.min(this._beginning,this._ending),s=Math.max(this._beginning,this._ending),r=this.length,a=0,o=n*r,h=s*r;for(t=0;t<this.children.length;t++)o>a+(e=(i=this.children[t]).length)?(i.beginning=1,i.ending=1):h<a?(i.beginning=0,i.ending=0):o>a&&o<a+e?(i.beginning=(o-a)/e,i.ending=1):h>a&&h<a+e?(i.beginning=0,i.ending=(h-a)/e):(i.beginning=0,i.ending=1),a+=e}return Pt.prototype._update.apply(this,arguments)},flagReset:function(){return this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1),this._flagSubtractions&&(this.subtractions.length=0,this._flagSubtractions=!1),this._flagOrder=this._flagMask=this._flagOpacity=this._flagBeginning=this._flagEnding=!1,Pt.prototype.flagReset.call(this),this}}),zt.MakeObservable(zt.prototype);const Gt=zt;var Ut=[],Wt=(Math.PI,Math.max),Jt=(Math.min,Math.abs,Math.sin,Math.cos,Math.acos,Math.sqrt,function(t){return 1==t[0]&&0==t[3]&&0==t[1]&&1==t[4]&&0==t[2]&&0==t[5]}),Zt={isHidden:/(undefined|none|transparent)/i,alignments:{left:"start",middle:"center",right:"end"},shim:function(t,e){return t.tagName=t.nodeName=e||"canvas",t.nodeType=1,t.getAttribute=function(t){return this[t]},t.setAttribute=function(t,e){return this[t]=e,this},t},group:{renderChild:function(t){Zt[t._renderer.type].render.call(t,this.ctx,!0,this.clip)},render:function(t){if(!this._visible)return this;this._update();var e=this._matrix.elements,i=this.parent;this._renderer.opacity=this._opacity*(i&&i._renderer?i._renderer.opacity:1);var n=this._mask,s=Jt(e),r=!s||!!n;if(this._renderer.context||(this._renderer.context={}),this._renderer.context.ctx=t,r&&(t.save(),s||t.transform(e[0],e[3],e[1],e[4],e[2],e[5])),n&&Zt[n._renderer.type].render.call(n,t,!0),this._opacity>0&&0!==this._scale)for(var a=0;a<this.children.length;a++){var o=this.children[a];Zt[o._renderer.type].render.call(o,t)}return r&&t.restore(),this.flagReset()}},path:{render:function(t,e,i){var n,s,r,a,o,h,l,c,d,u,f,y,g,p,m,b,x,_,v,w,S,A,k,R,E,B,X,C,M,T,Y,O,j,L,P;if(P=this.parent&&this.parent._renderer?this.parent._renderer.opacity:1,T=this._mask,Y=this._clip,o=this._opacity*(P||1),h=this._visible,!e&&(!h||Y||0===o))return this;this._update(),n=this._matrix.elements,s=this._stroke,r=this._linewidth,a=this._fill,l=this._cap,c=this._join,d=this._miter,u=this._closed,g=(y=(f=this._renderer.vertices).length)-1,O=Jt(n),L=this.dashes,O||(t.save(),t.transform(n[0],n[3],n[1],n[4],n[2],n[5])),T&&Zt[T._renderer.type].render.call(T,t,!0),a&&("string"==typeof a?t.fillStyle=a:(Zt[a._renderer.type].render.call(a,t),t.fillStyle=a._renderer.effect)),s&&("string"==typeof s?t.strokeStyle=s:(Zt[s._renderer.type].render.call(s,t),t.strokeStyle=s._renderer.effect),r&&(t.lineWidth=r),d&&(t.miterLimit=d),c&&(t.lineJoin=c),!u&&l&&(t.lineCap=l)),"number"==typeof o&&(t.globalAlpha=o),L&&L.length>0&&(t.lineDashOffset=L.offset||0,t.setLineDash(L)),t.beginPath();for(var N=0;N<f.length;N++)switch(C=(x=f[N]).x,M=x.y,x.command){case V:t.closePath();break;case D:var z=x.rx,q=x.ry,G=x.xAxisRotation,U=x.largeArcFlag,W=x.sweepFlag,J=(b=f[m=u?$(N-1,y):Wt(N-1,0)]).x,Z=b.y;Zt.renderSvgArcCommand(t,J,Z,z,q,U,W,G,C,M);break;case I:m=u?$(N-1,y):Math.max(N-1,0),p=u?$(N+1,y):Math.min(N+1,g),b=f[m],_=f[p],R=b.controls&&b.controls.right||dt.zero,E=x.controls&&x.controls.left||dt.zero,b._relative?(A=R.x+b.x,k=R.y+b.y):(A=R.x,k=R.y),x._relative?(w=E.x+x.x,S=E.y+x.y):(w=E.x,S=E.y),t.bezierCurveTo(A,k,w,S,C,M),N>=g&&u&&(_=v,B=x.controls&&x.controls.right||dt.zero,X=_.controls&&_.controls.left||dt.zero,x._relative?(A=B.x+x.x,k=B.y+x.y):(A=B.x,k=B.y),_._relative?(w=X.x+_.x,S=X.y+_.y):(w=X.x,S=X.y),C=_.x,M=_.y,t.bezierCurveTo(A,k,w,S,C,M));break;case H:t.lineTo(C,M);break;case F:v=x,t.moveTo(C,M)}return u&&t.closePath(),Y||i||(Zt.isHidden.test(a)||((j=a._renderer&&a._renderer.offset)&&(t.save(),t.translate(-a._renderer.offset.x,-a._renderer.offset.y),t.scale(a._renderer.scale.x,a._renderer.scale.y)),t.fill(),j&&t.restore()),Zt.isHidden.test(s)||((j=s._renderer&&s._renderer.offset)&&(t.save(),t.translate(-s._renderer.offset.x,-s._renderer.offset.y),t.scale(s._renderer.scale.x,s._renderer.scale.y),t.lineWidth=r/s._renderer.scale.x),t.stroke(),j&&t.restore())),O||t.restore(),Y&&!i&&t.clip(),L&&L.length>0&&t.setLineDash(Ut),this.flagReset()}}};function $t(t){var e=!1!==t.smoothing;this.domElement=t.domElement||document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this.overdraw=t.overdraw||!1,void 0!==this.ctx.imageSmoothingEnabled&&(this.ctx.imageSmoothingEnabled=e),this.scene=new Gt,this.scene.parent=this}et.extend($t,{Utils:Zt}),et.extend($t.prototype,at,{constructor:$t,setSize:function(t,e,i){return this.width=t,this.height=e,this.ratio=void 0===i?Xt(this.ctx):i,this.domElement.width=t*this.ratio,this.domElement.height=e*this.ratio,this.domElement.style&&et.extend(this.domElement.style,{width:t+"px",height:e+"px"}),this.trigger(at.Types.resize,t,e,i)},render:function(){var t=1===this.ratio;return t||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio)),this.overdraw||this.ctx.clearRect(0,0,this.width,this.height),Zt.group.render.call(this.scene,this.ctx),t||this.ctx.restore(),this}});const Kt=$t;var Qt={Image:null,isHeadless:!1,shim:function(t,e){return Kt.Utils.shim(t),void 0!==e&&(Qt.Image=e),Qt.isHeadless=!0,t}};const te=Qt;var ee={hasEventListeners:"function"==typeof q.addEventListener,bind:function(t,e,i,n){return this.hasEventListeners?t.addEventListener(e,i,!!n):t.attachEvent("on"+e,i),ee},unbind:function(t,e,i,n){return ee.hasEventListeners?t.removeEventListeners(e,i,!!n):t.detachEvent("on"+e,i),ee},getRequestAnimationFrame:function(){var t,e=0,i=["ms","moz","webkit","o"],n=q.requestAnimationFrame;if(!n){for(var s=0;s<i.length;s++)n=q[i[s]+"RequestAnimationFrame"]||n,t=q[i[s]+"CancelAnimationFrame"]||q[i[s]+"CancelRequestAnimationFrame"]||t;n=n||function(t,i){var n=(new Date).getTime(),s=Math.max(0,16-(n-e)),r=q.setTimeout((function(){t(n+s)}),s);return e=n+s,r}}return n}},ie=q.document?q.document.createElement("div"):{};ie.id="help-two-load",Object.defineProperty(ee,"temp",{enumerable:!0,get:function(){return et.isElement(ie)&&!q.document.head.contains(ie)&&(et.extend(ie.style,{display:"none"}),q.document.head.appendChild(ie)),ie}});const ne=ee;function se(t){this.name="Two.js",this.message=t}se.prototype=new Error,et.extend(se.prototype,{constructor:se});const re=se,ae=function(t){var e="_"+t,i="_flag"+t.charAt(0).toUpperCase()+t.slice(1);Object.defineProperty(this,t,{enumerable:!0,get:function(){return this[e]},set:function(t){this[e]=t,this[i]=!0}})};var oe=Math.min,he=Math.max,le=Math.ceil,ce=Math.floor;function de(t,e,i,n){Pt.call(this),this._renderer.type="path",this._renderer.flagVertices=de.FlagVertices.bind(this),this._renderer.bindVertices=de.BindVertices.bind(this),this._renderer.unbindVertices=de.UnbindVertices.bind(this),this._renderer.flagFill=de.FlagFill.bind(this),this._renderer.flagStroke=de.FlagStroke.bind(this),this._renderer.vertices=[],this._renderer.collection=[],this._closed=!!e,this._curved=!!i,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.linewidth=1,this.opacity=1,this.className="",this.visible=!0,this.cap="butt",this.join="miter",this.miter=4,this.vertices=t,this.automatic=!n,this.dashes=[],this.dashes.offset=0}function ue(t,e){if(0===e||1===e)return!0;for(var i=t._length*e,n=0,s=0;s<t._lengths.length;s++){var r=t._lengths[s];if(n>=i)return i-n>=0;n+=r}return!1}function fe(t,e){var i=t._length;if(e<=0)return 0;if(e>=i)return t._lengths.length-1;for(var n=0,s=0;n<t._lengths.length;n++){if(s+t._lengths[n]>=e)return e-=s,Math.max(n-1,0)+e/t._lengths[n];s+=t._lengths[n]}return-1}function ye(t,e,i){var n,s,r,a,o,h,l,c,d=e.controls&&e.controls.right,u=t.controls&&t.controls.left;return n=e.x,o=e.y,s=(d||e).x,h=(d||e).y,r=(u||t).x,l=(u||t).y,a=t.x,c=t.y,d&&e._relative&&(s+=e.x,h+=e.y),u&&t._relative&&(r+=t.x,l+=t.y),vt(n,o,s,h,r,l,a,c,i)}function ge(t,e,i){var n,s,r,a,o,h,l,c,d=e.controls&&e.controls.right,u=t.controls&&t.controls.left;return n=e.x,o=e.y,s=(d||e).x,h=(d||e).y,r=(u||t).x,l=(u||t).y,a=t.x,c=t.y,d&&e._relative&&(s+=e.x,h+=e.y),u&&t._relative&&(r+=t.x,l+=t.y),_t(n,o,s,h,r,l,a,c,i)}et.extend(de,{Properties:["fill","stroke","linewidth","opacity","visible","cap","join","miter","closed","curved","automatic","beginning","ending"],Utils:{getCurveLength:ye},FlagVertices:function(){this._flagVertices=!0,this._flagLength=!0,this.parent&&(this.parent._flagLength=!0)},BindVertices:function(t){for(var e=t.length;e--;)t[e].bind(at.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()},UnbindVertices:function(t){for(var e=t.length;e--;)t[e].unbind(at.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()},FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(t){Pt.MakeObservable(t),et.each(de.Properties.slice(2,8),ae,t),Object.defineProperty(t,"fill",{enumerable:!0,get:function(){return this._fill},set:function(t){this._fill=t,this._flagFill=!0}}),Object.defineProperty(t,"stroke",{enumerable:!0,get:function(){return this._stroke},set:function(t){this._stroke=t,this._flagStroke=!0}}),Object.defineProperty(t,"length",{get:function(){return this._flagLength&&this._updateLength(),this._length}}),Object.defineProperty(t,"closed",{enumerable:!0,get:function(){return this._closed},set:function(t){this._closed=!!t,this._flagVertices=!0}}),Object.defineProperty(t,"curved",{enumerable:!0,get:function(){return this._curved},set:function(t){this._curved=!!t,this._flagVertices=!0}}),Object.defineProperty(t,"automatic",{enumerable:!0,get:function(){return this._automatic},set:function(t){if(t!==this._automatic){this._automatic=!!t;var e=this._automatic?"ignore":"listen";et.each(this.vertices,(function(t){t[e]()}))}}}),Object.defineProperty(t,"beginning",{enumerable:!0,get:function(){return this._beginning},set:function(t){this._beginning=t,this._flagVertices=!0}}),Object.defineProperty(t,"ending",{enumerable:!0,get:function(){return this._ending},set:function(t){this._ending=t,this._flagVertices=!0}}),Object.defineProperty(t,"vertices",{enumerable:!0,get:function(){return this._collection},set:function(t){var e=this._renderer.bindVertices,i=this._renderer.unbindVertices;this._collection&&this._collection.unbind(at.Types.insert,e).unbind(at.Types.remove,i),this._collection=t instanceof Ft?t:new Ft(t||[]),this._collection.bind(at.Types.insert,e).bind(at.Types.remove,i),e(this._collection)}}),Object.defineProperty(t,"mask",{enumerable:!0,get:function(){return this._mask},set:function(t){this._mask=t,this._flagMask=!0,t.clip||(t.clip=!0)}}),Object.defineProperty(t,"clip",{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}}),Object.defineProperty(t,"dashes",{enumerable:!0,get:function(){return this._dashes},set:function(t){"number"!=typeof t.offset&&(t.offset=this._dashes.offset||0),this._dashes=t}})}}),et.extend(de.prototype,Pt.prototype,{constructor:de,_flagVertices:!0,_flagLength:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagVisible:!0,_flagCap:!0,_flagJoin:!0,_flagMiter:!0,_flagMask:!1,_flagClip:!1,_length:0,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_mask:null,_clip:!1,_dashes:[],clone:function(t){for(var e=new de,i=0;i<this.vertices.length;i++)e.vertices.push(this.vertices[i].clone());for(var n=0;n<de.Properties.length;n++){var s=de.Properties[n];e[s]=this[s]}return e.className=this.className,e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},toObject:function(){var t={vertices:this.vertices.map((function(t){return t.toObject()}))};return et.each(de.Properties,(function(e){t[e]=this[e]}),this),t.className=this.className,t.translation=this.translation.toObject(),t.rotation=this.rotation,t.scale=this.scale instanceof dt?this.scale.toObject():this.scale,t.skewX=this.skewX,t.skewY=this.skewY,this.matrix.manual&&(t.matrix=this.matrix.toObject()),t},noFill:function(){return this.fill="transparent",this},noStroke:function(){return this.stroke=void 0,this},corner:function(){for(var t=this.getBoundingClientRect(!0),e=t.width/2,i=t.height/2,n=t.left+t.width/2,s=t.top+t.height/2,r=0;r<this.vertices.length;r++){var a=this.vertices[r];a.x-=n,a.y-=s,a.x+=e,a.y+=i}return this},center:function(){for(var t=this.getBoundingClientRect(!0),e=t.left+t.width/2-this.translation.x,i=t.top+t.height/2-this.translation.y,n=0;n<this.vertices.length;n++){var s=this.vertices[n];s.x-=e,s.y-=i}return this},remove:function(){return this.parent?(this.parent.remove(this),this):this},getBoundingClientRect:function(t){var e,i,n,s,r,a,o,h,l,c,d,u,f,y,g=1/0,p=-1/0,m=1/0,b=-1/0;if(this._update(!0),e=t?this._matrix:J(this),i=(this.linewidth||0)/2,(n=this._renderer.vertices.length)<=0)return{width:0,height:0};for(s=0;s<n;s++)if(a=this._renderer.vertices[s],(r=this._renderer.vertices[(s+n-1)%n]).controls&&a.controls){o=r.controls.right.x,h=r.controls.right.y,r.relative&&(o+=r.x,h+=r.y),l=a.controls.left.x,c=a.controls.left.y,a.relative&&(l+=a.x,c+=a.y);var x=wt(r.x,r.y,o,h,l,c,a.x,a.y);m=oe(x.min.y-i,m),g=oe(x.min.x-i,g),p=he(x.max.x+i,p),b=he(x.max.y+i,b)}else s<=1&&(m=oe(r.y-i,m),g=oe(r.x-i,g),p=he(r.x+i,p),b=he(r.y+i,b)),m=oe(a.y-i,m),g=oe(a.x-i,g),p=he(a.x+i,p),b=he(a.y+i,b);return d=e.multiply(g,m,1),u=e.multiply(g,b,1),f=e.multiply(p,m,1),y=e.multiply(p,b,1),{top:m=oe(d.y,u.y,f.y,y.y),left:g=oe(d.x,u.x,f.x,y.x),right:p=he(d.x,u.x,f.x,y.x),bottom:b=he(d.y,u.y,f.y,y.y),width:p-g,height:b-m}},getPointAt:function(t,e){for(var i,n,s,r,a,o,h,l,c,d,u,f,y,g,p,m=this.length*Math.min(Math.max(t,0),1),b=this.vertices.length,x=b-1,_=null,v=null,w=0,S=this._lengths.length,A=0;w<S;w++){if(A+this._lengths[w]>=m){this._closed?(i=$(w,b),n=$(w-1,b),0===w&&(i=n,n=w)):(i=w,n=Math.min(Math.max(w-1,0),x)),_=this.vertices[i],v=this.vertices[n],m-=A,t=0!==this._lengths[w]?m/this._lengths[w]:0;break}A+=this._lengths[w]}if(null===_||null===v)return null;if(!_)return v;if(!v)return _;p=v.controls&&v.controls.right,g=_.controls&&_.controls.left,a=v.x,d=v.y,o=(p||v).x,u=(p||v).y,h=(g||_).x,f=(g||_).y,l=_.x,y=_.y,p&&v.relative&&(o+=v.x,u+=v.y),g&&_.relative&&(h+=_.x,f+=_.y),r=xt(t,a,o,h,l),c=xt(t,d,u,f,y);var k=Z(a,o,t),R=Z(d,u,t),E=Z(o,h,t),B=Z(u,f,t),X=Z(h,l,t),C=Z(f,y,t),M=Z(k,E,t),T=Z(R,B,t),Y=Z(E,X,t),O=Z(B,C,t);return et.isObject(e)?(e.x=r,e.y=c,et.isObject(e.controls)||yt.AppendCurveProperties(e),e.controls.left.x=M,e.controls.left.y=T,e.controls.right.x=Y,e.controls.right.y=O,("boolean"===(e.relative,!1)||e.relative)&&(e.controls.left.x-=r,e.controls.left.y-=c,e.controls.right.x-=r,e.controls.right.y-=c),e.t=t,e):((s=new yt(r,c,M-r,T-c,Y-r,O-c,this._curved?I:H)).t=t,s)},plot:function(){if(this.curved)return At(this._collection,this.closed),this;for(var t=0;t<this._collection.length;t++)this._collection[t].command=0===t?F:H;return this},subdivide:function(t){this._update();var e=this.vertices.length-1,i=this.vertices[e],n=this._closed||this.vertices[e]._command===V,s=[];return et.each(this.vertices,(function(r,a){if(a<=0&&!n)i=r;else{if(r.command===F)return s.push(new yt(i.x,i.y)),a>0&&(s[s.length-1].command=H),void(i=r);var o=ge(r,i,t);s=s.concat(o),et.each(o,(function(t,e){e<=0&&i.command===F?t.command=F:t.command=H})),a>=e&&(this._closed&&this._automatic?(o=ge(r,i=r,t),s=s.concat(o),et.each(o,(function(t,e){e<=0&&i.command===F?t.command=F:t.command=H}))):n&&s.push(new yt(r.x,r.y)),s[s.length-1].command=n?V:H),i=r}}),this),this._automatic=!1,this._curved=!1,this.vertices=s,this},_updateLength:function(t,e){e||this._update();var i=this.vertices.length-1,n=this.vertices[i],s=0;return void 0===this._lengths&&(this._lengths=[]),et.each(this.vertices,(function(e,i){if(i<=0||e.command===F)return n=e,void(this._lengths[i]=0);this._lengths[i]=ye(e,n,t),s+=this._lengths[i],n=e}),this),this._length=s,this._flagLength=!1,this},_update:function(){if(this._flagVertices){this._automatic&&this.plot(),this._flagLength&&this._updateLength(void 0,!0);var t,e,i,n,s,r=this._collection.length,a=this._closed,o=Math.min(this._beginning,this._ending),h=Math.max(this._beginning,this._ending),l=fe(this,o*this._length),c=fe(this,h*this._length),d=le(l),u=ce(c);this._renderer.vertices.length=0;for(var f=0;f<r;f++)this._renderer.collection.length<=f&&this._renderer.collection.push(new yt),f>u&&!e?((s=this._renderer.collection[f]).copy(this._collection[f]),this.getPointAt(h,s),s.command=this._renderer.collection[f].command,this._renderer.vertices.push(s),e=s,(i=this._collection[f-1])&&i.controls&&(s.controls.right.clear(),this._renderer.collection[f-1].controls.right.clear().lerp(i.controls.right,s.t))):f>=d&&f<=u&&(s=this._renderer.collection[f].copy(this._collection[f]),this._renderer.vertices.push(s),f===u&&ue(this,h)?(e=s,!a&&e.controls&&e.controls.right.clear()):f===d&&ue(this,o)&&((t=s).command=F,!a&&t.controls&&t.controls.left.clear()));d>0&&!t&&(f=d-1,(s=this._renderer.collection[f]).copy(this._collection[f]),this.getPointAt(o,s),s.command=F,this._renderer.vertices.unshift(s),t=s,(n=this._collection[f+1])&&n.controls&&(s.controls.left.clear(),this._renderer.collection[f+1].controls.left.copy(n.controls.left).lerp(dt.zero,s.t)))}return Pt.prototype._update.apply(this,arguments),this},flagReset:function(){return this._flagVertices=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=this._flagClip=!1,Pt.prototype.flagReset.call(this),this}}),de.MakeObservable(de.prototype);const pe=de;function me(){this.map={}}et.extend(me.prototype,{constructor:me,add:function(t,e){return this.map[t]=e,this},remove:function(t){return delete this.map[t],this},get:function(t){return this.map[t]},contains:function(t){return t in this.map}});const be=me;function xe(t,e,i,n){pe.call(this,[new yt(t,e),new yt(i,n)]),this.vertices[0].command=F,this.vertices[1].command=H,this.automatic=!1}et.extend(xe.prototype,pe.prototype,{constructor:xe}),pe.MakeObservable(xe.prototype);const _e=xe;function ve(t,e,i,n){pe.call(this,[new yt,new yt,new yt,new yt],!0,!1,!0),this.width=i,this.height=n,this.origin=new dt,this.translation.set(t,e),this._update()}et.extend(ve,{Properties:["width","height"],MakeObservable:function(t){pe.MakeObservable(t),et.each(ve.Properties,ae,t),Object.defineProperty(t,"origin",{enumerable:!0,get:function(){return this._origin},set:function(t){this._origin&&this._origin.unbind(at.Types.change,this._renderer.flagVertices),this._origin=t,this._origin.bind(at.Types.change,this._renderer.flagVertices),this._renderer.flagVertices()}})}}),et.extend(ve.prototype,pe.prototype,{constructor:ve,_flagWidth:0,_flagHeight:0,_width:0,_height:0,_origin:null,_update:function(){if(this._flagVertices||this._flagWidth||this._flagHeight){var t=this._width/2,e=this._height/2;this._closed||4!==this.vertices.length||this.vertices.push(new yt),this.vertices[0].set(-t,-e).add(this._origin).command=F,this.vertices[1].set(t,-e).add(this._origin).command=H,this.vertices[2].set(t,e).add(this._origin).command=H,this.vertices[3].set(-t,e).add(this._origin).command=H,this.vertices[4]&&(this.vertices[4].set(-t,-e).add(this._origin).command=H)}return pe.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=!1,pe.prototype.flagReset.call(this),this},clone:function(t){var e=new ve(0,0,this.width,this.height);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),et.each(pe.Properties,(function(t){e[t]=this[t]}),this),t&&t.add(e),e},toObject:function(){var t=pe.prototype.toObject.call(this);return t.width=this.width,t.height=this.height,t.origin=this.origin.toObject(),t}}),ve.MakeObservable(ve.prototype);const we=ve;function Se(t){var e=et.defaults(t||{},{fullscreen:!1,fitted:!1,width:640,height:480,type:Se.Types.svg,autostart:!1});if(et.each(e,(function(t,e){/fullscreen/i.test(e)||/autostart/i.test(e)||(this[e]=t)}),this),et.isElement(e.domElement)){var i=e.domElement.tagName.toLowerCase();/^(CanvasRenderer-canvas|WebGLRenderer-canvas|SVGRenderer-svg)$/.test(this.type+"-"+i)||(this.type=Se.Types[i])}this.renderer=new Se[this.type](this),this.setPlaying(e.autostart),this.frameCount=0,e.fullscreen?(this.fit=Ae.bind(this),this.fit.domElement=window,this.fit.attached=!0,et.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),et.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed"}),ne.bind(this.fit.domElement,"resize",this.fit),this.fit()):e.fitted?(this.fit=ke.bind(this),et.extend(this.renderer.domElement.style,{display:"block"})):et.isElement(e.domElement)||(this.renderer.setSize(e.width,e.height,this.ratio),this.width=e.width,this.height=e.height),this.renderer.bind(at.Types.resize,Re.bind(this)),this.scene=this.renderer.scene,Se.Instances.push(this),e.autostart&&Ee.init()}function Ae(){var t=document.body.getBoundingClientRect(),e=this.width=t.width,i=this.height=t.height;this.renderer.setSize(e,i,this.ratio)}function ke(){var t=this.renderer.domElement.parentElement;if(t){var e=t.getBoundingClientRect(),i=this.width=e.width,n=this.height=e.height;this.renderer.setSize(i,n,this.ratio)}else console.warn("Two.js: Attempting to fit to parent, but no parent found.")}function Re(t,e){this.width=t,this.height=e,this.trigger(at.Types.resize,t,e)}et.extend(Se,pt),et.extend(Se.prototype,at,{constructor:Se,type:"",renderer:null,scene:null,width:0,height:0,frameCount:0,timeDelta:0,playing:!1,appendTo:function(t){return t.appendChild(this.renderer.domElement),this.fit&&(this.fit.domElement!==window&&(this.fit.domElement=t,this.fit.attached=!1),this.update()),this},play:function(){return this.playing=!0,Ee.init(),this.trigger(at.Types.play)},pause:function(){return this.playing=!1,this.trigger(at.Types.pause)},setPlaying:function(t){this.playing=t},release:function(t){var e,i,n;if(et.isObject(t)){if("function"==typeof t.unbind&&t.unbind(),t.vertices)for("function"==typeof t.vertices.unbind&&t.vertices.unbind(),e=0;e<t.vertices.length;e++)"function"==typeof(i=t.vertices[e]).unbind&&i.unbind();if(t.children)for(e=0;e<t.children.length;e++)n=t.children[e],this.release(n);return t}},update:function(){var t=!!this._lastFrame,e=et.performance.now();t&&(this.timeDelta=parseFloat((e-this._lastFrame).toFixed(3))),this._lastFrame=e,this.fit&&this.fit.domElement&&!this.fit.attached&&(ne.bind(this.fit.domElement,"resize",this.fit),this.fit.attached=!0,this.fit());var i=this.width,n=this.height,s=this.renderer;return i===s.width&&n===s.height||s.setSize(i,n,this.ratio),this.trigger(at.Types.update,this.frameCount,this.timeDelta),this.render()},render:function(){return this.renderer.render(),this.trigger(at.Types.render,this.frameCount++)},add:function(t){var e=t;return e instanceof Array||(e=Array.prototype.slice.call(arguments)),this.scene.add(e),this},remove:function(t){var e=t;return e instanceof Array||(e=Array.prototype.slice.call(arguments)),this.scene.remove(e),this},clear:function(){return this.scene.remove(this.scene.children),this},makeRectangle:function(t,e,i,n){var s=new we(t,e,i,n);return this.scene.add(s),s},makeCurve:function(t){var e=arguments.length,i=t;if(!Array.isArray(t)){i=[];for(var n=0;n<e;n+=2){var s=arguments[n];if("number"!=typeof s)break;var r=arguments[n+1];i.push(new yt(s,r))}}var a=arguments[e-1],o=new pe(i,!("boolean"==typeof a?a:void 0),!0),h=o.getBoundingClientRect();return o.center().translation.set(h.left+h.width/2,h.top+h.height/2),this.scene.add(o),o},makePath:function(t){var e=arguments.length,i=t;if(!Array.isArray(t)){i=[];for(var n=0;n<e;n+=2){var s=arguments[n];if("number"!=typeof s)break;var r=arguments[n+1];i.push(new yt(s,r))}}var a=arguments[e-1],o=new pe(i,!("boolean"==typeof a?a:void 0)),h=o.getBoundingClientRect();return"number"==typeof h.top&&"number"==typeof h.left&&"number"==typeof h.right&&"number"==typeof h.bottom&&o.center().translation.set(h.left+h.width/2,h.top+h.height/2),this.scene.add(o),o},makeGroup:function(t){var e=t;e instanceof Array||(e=Array.prototype.slice.call(arguments));var i=new Gt;return this.scene.add(i),i.add(e),i}});var Ee=ne.getRequestAnimationFrame();function Be(){for(var t=0;t<Se.Instances.length;t++){var e=Se.Instances[t];e.playing&&e.update()}Se.nextFrameID=Ee(Be)}Ee.init=function(){Be(),Ee.init=function(){}},et.extend(Se,{Anchor:yt,Collection:Ft,Events:at,Group:Gt,Matrix:jt,Path:pe,Registry:be,Shape:Pt,Text,Vector:dt,Line:_e,CanvasRenderer:Kt,Utils:et.extend({Error:re,getRatio:Xt,defineGetterSetter:ae},et,te,n,i)});const Xe=Se;function Ce(t){const e=new Xe({fullscreen:!1,autostart:!0,domElement:t});let i,n,s={two:e},r=!1,a=!1,o=0,h=0,l=0,c=0,d=0,u=0,f=0,y=0,g=.003;const p=e.width,m=e.height;function b(){const t=Math.min(e.width,e.height);n.translation.x=.5*e.width,n.translation.y=.5*e.height,n.scale=10*Math.max(e.width/100,e.height/100),i.resize(t*g)}function x(i,n){if(a||r)return;const s=i-o,u=n-h,g=i-.5*e.width,p=n-.5*e.height;f=g/e.width*.5,y=p/e.height*.5,d=Math.atan2(g,p),c=Math.sqrt(s*s+u*u),l=Math.sqrt(g*g+p*p),o=i,h=n,0==t.width&&0==t.height||b()}let _=!1;return{resizeScene:function(i,n){t.width=i,t.height=n,e.width=t.width,e.height=t.height,e.renderer.setSize(i,n)},loadDude:function(o){e.clear(),i=new L(o,e,Xe),s.theDude=i,n=e.makeRectangle(0,0,p,m),n.fill=i.context.theme.bg,n.noStroke(),i.draw(),e.render(),b(),_||(t.addEventListener("mousemove",(function(t){x(t.clientX,t.clientY)})),t.addEventListener("touchmove",(function(t){console.log("event",t),x(t.changedTouches[0].pageX,t.changedTouches[0].pageY)})),t.addEventListener("mousedown",(function(t){u+=u<50?100:1+1.001*u})),t.addEventListener("touchstart",(function(t){u+=1+1.001*u})),t.addEventListener("keydown",(function(t){if(65==t.keyCode){if(r)return r=!1,void(a=!1);a=!a}else if(32==t.keyCode){if(a)return r=!1,void(a=!1);l=0,c=0,d=0,u=0,f=0,y=0,r=!r}})),e.bind("update",(function(t){b(),a||(r?u=0:(u+=.05*(0-u),u=Math.min(u,1500),u<5&&(u=2)),i.animate({speed:c,angle:d,shake:u,distance:l,drx:f,dry:y,friction:.2}))})).play(),e.bind("resize",(function(){})),_=!0)},scaleDude:function(t){g=t,b()},setDudeAnimationEnabled:function(t){r=!t},setDudeFrozen:function(t){a=t},contents:s}}theOnChainDudes=e})();